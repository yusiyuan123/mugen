;変数使用表
;　1 = 
;　2 = 勝利ポーズ変更
;　3 = 
;　4 = スロー処理
;　5 = 強弱ボタン判定
;　6 = 通常攻撃ボイス、乱数指定
;　7 = ダイア、追加入力
;　8 = カウンダーヒット
;　9 = 特殊イントロ用変数（0.ノーマル?1.）
; 10 = プレイヤーの向き設定
; 11 = 暗転用変数
; 12 = KOサウンド
; 13 = 勝利判定
; 14 = ダイア、クラブ、スペード、ハート　派生制限
; 15 = ハイジャンプ
; 16 = 小ジャンプ
; 17 = ダメージ補正に使用
; 18 = 攻撃値の保存
; 19 = ダイア、クラブ、スペード、ハートコマンド判定
; 20 = 派生関係その２
; 21 = Q、投げるカードの種類
; 22 = 透過
; 23 = 
; 24 = 
; 25 = 
; 26 = ねばり補正
;
; 30 = AI判定(にしたいな…)

; f(1) = 攻撃補正
; f(2) = 






[Data]
 power = 5000;all5000
 volumescale = 200;samevolume
  ;体力ゲージの初期値
life = 1000
  ;攻撃力（これ以上に設定すると強くなる）
attack = 90
  ;防御力（これ以上に設定すると強くなる）
defence = 100
  ;コンボをくらっている時にあがる防御力
fall.defence_up = 50
  ;倒れてから起上がるまでのフレーム数
liedown.time = 11
  ;空中でどれだけコンボが繋がるか（高くすると無限コンボになるので注意）
airjuggle = 999999
  ;hitdefで設定していない時の基本ヒットスパークナンバー
sparkno = 2
  ;設定してない時のガードナンバー
guard.sparkno = 40
  ;KOした時に声にエコーをかけるか（１でＯＮ）
KO.echo = 0
volumescale = 5
IntPersistIndex = 0
FloatPersistIndex = 0

[Size]
xscale = 1.0        ;水平方向の縮尺（通常１）
yscale = 1.0          ;垂直方向の縮尺（通常１）
ground.back = 15     ;キャラの幅(後方,地上)
ground.front = 16    ;キャラの幅(前方,地上)
air.back = 12        ;キャラの幅(後方,空中)
air.front = 12       ;キャラの幅(前方,空中)
height = 102          ;キャラの高さ
attack.dist = 320    ;攻撃をした時相手がガード体制に入る最低距離
proj.attack.dist = 320;攻撃をした時相手がガード体制に入る最低距離（飛び道具）
proj.doscale = 0     ;上で設定した縮尺を飛び道具にも適用するか（１でＯＮ）   
head.pos = 0, -100   ;頭の大体の座標
mid.pos = -11, -60    ;体の中心の大体の座標
shadowoffset = 0     ;影の垂直方向のオフセット
draw.offset = 0,0    ;使用しない

[Velocity]
walk.fwd  = 2.4      ;前進の速度
walk.back = -2.2     ;後退の速度
run.fwd  = 5.7, 0    ;前ダッシュの速度（ホップする時はyを-にする）
run.back = -5.5,-2.1 ;後ダッシュの速度（ホップする時はyを-にする）
jump.neu = 0,-11.6    ;垂直ジャンプの速度
jump.back = -4.05,1    ;後ジャンプの速度
jump.fwd = 4.0,1       ;前ジャンプの速度
runjump.back = -2.55,-8.1 ;後ダッシュしながらのジャンプ速度(オプション)
runjump.fwd = 4,-8.1      ;前ダッシュしながらのジャンプ速度(オプション)
airjump.neu = 0,-8.1      ;２段ジャンプ以降の垂直ジャンプの速度(オプション)
airjump.back = -2.55      ;２段ジャンプ以降の後ジャンプの速度(オプション)
airjump.fwd = 2.5         ;２段ジャンプ以降の前ジャンプの速度

[Movement]
airjump.num = 0      ;空中でジャンプする回数
airjump.height = 35  ;空中でジャンプする最低限の高さ
yaccel = .60         ;重力
stand.friction = .85  ;立ち状態の摩擦係数
crouch.friction = .82 ;屈み状態の摩擦係数

[Statedef 959339]
Type = S

[State -2]
Type = null;varset
Trigger1 = var(59)>0
var(57)=Cond((!enemynear,alive&&numenemy=2),1,0)

[State 5900, 3] ;Intro for round 1
Type = ChangeState
Trigger1 = roundno = 1
value = 190


;---------------------------------------------------------------------------
; Stand
[Statedef 0]
Type = S
physics = S
sprpriority = 1

[State 0, 1]
Type = ChangeAnim
Trigger1 = Anim != 0 && Anim != 5
Trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
Type = VelSet
Trigger1 = Time = 0
y = 0

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 =  Ishelper
;ignorehitpause = 
;persistent = 


[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
Type = VelSet
Trigger1 = abs(vel x) < 2
Trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
Type = ChangeState
Trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
; AI?僕???
[Statedef 30]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = , NT, ST, HT

[State 40, 2]
Type = VarSet
Trigger1 = 1
sysvar(1) = 1

[State 40, 1]
Type = VarSet
Trigger1 = 1
var(4) = 0

[State 40, 4]
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 0
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4];彫僕???
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 1
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -7

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;??僕???
[Statedef 31]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = , NT, ST, HT

[State 40, 2]
Type = VarSet
Trigger1 = 1
sysvar(1) = -1

[State 40, 1]
Type = VarSet
Trigger1 = 1
var(4) = 0

[State 40, 4]
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 0
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4];彫僕???
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 1
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -7

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;?彫僕???
[Statedef 32]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = , NT, ST, HT

[State 40, 2]
Type = VarSet
Trigger1 = 1
sysvar(1) = 1

[State 40, 1]
Type = VarSet
Trigger1 = 1
var(4) = 1

[State 40, 4]
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 0
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4];彫僕???
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 1
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -7

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;??彫僕???
[Statedef 33]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = , NT, ST, HT

[State 40, 2]
Type = VarSet
Trigger1 = 1
sysvar(1) = -1

[State 40, 1]
Type = VarSet
Trigger1 = 1
var(4) = 1

[State 40, 4]
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 0
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4];彫僕???
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 1
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -7

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;BC专用
[Statedef 34]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = , NT, ST, HT

[State 40, 2]
Type = VarSet
Trigger1 = 1
sysvar(1) = 1

[State 40, 4];彫僕???
Type = VelSet
Trigger1 = AnimTime = 0
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.runjump.fwd.x)+2.3, const(velocity.jump.back.x)))
y = -7

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;???僕???
[Statedef 35]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = , NT, ST, HT

[State 40, 2]
Type = VarSet
Trigger1 = 1
sysvar(1) = -1

[State 40, 1]
Type = VarSet
Trigger1 = 1
var(4) = 1

[State 40, 4]
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 0
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4];彫僕???
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 1
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -7

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;?戝僕???
[Statedef 36]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = , NT, ST, HT

[State 40, 2]
Type = VarSet
Trigger1 = 1
sysvar(1) = 1

[State 40, 1]
Type = VarSet
Trigger1 = 1
var(4) = 0

[State 40, 4]
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 0
x =  Cond(Abs(EnemyNear(Floor(Fvar(37))),Pos x-Pos x)<225,const(velocity.jump.fwd.x),const(velocity.jump.fwd.x)+1.7)
y = const(velocity.jump.y)

[State 40, 4];彫僕???
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 1
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -7

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;??戝僕???
[Statedef 37]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = , NT, ST, HT

[State 40, 2]
Type = VarSet
Trigger1 = 1
sysvar(1) = -1

[State 40, 1]
Type = VarSet
Trigger1 = 1
var(4) = 0

[State 40, 4]
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 0
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4];彫僕???
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 1
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -7

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;?僕???
[Statedef 38]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = , NT, ST, HT

[State 40, 2]
Type = VarSet
Trigger1 = 1
sysvar(1) = 0

[State 40, 1]
Type = VarSet
Trigger1 = 1
var(4) = 0

[State 40, 4]
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 0
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4];彫僕???
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 1
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -7

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1


;---------------------- Integer variable list ----------------------

; var(1):= 1805, 10150, 10151, 10901, 31000, 32000, 999, -1
; var(2):= 180, 190, 195, 31000, 32000, 999
; var(3):= -3, 999
; var(4):= 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 999


;---------------------------------------------------------------------------
;??彫僕???
[Statedef 39]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = , NT, ST, HT

[State 40, 2]
Type = VarSet
Trigger1 = 1
sysvar(1) = 0

[State 40, 1]
Type = VarSet
Trigger1 = 1
var(4) = 1

[State 40, 4]
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 0
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4];彫僕???
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 1
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -7

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

[Statedef 40]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State changeState]
Type = ChangeState
TriggerAll = Var(59) != 0
Trigger1 = time = 0
Value = 0
Ctrl = 1
IgnoreHitPause = 1


[State 40, 2]
Type = VarSet
Trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
Type = VarSet
Trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
Type = VelSet
Trigger1 = AnimTime = 0
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)


[State 40, 5]
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = prevStateno = 100 ;RUN_FWD
Trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

[Statedef 41]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1];小ジャンプ
Type = VarSet
Trigger1 = var(59)>0
var(4) = 1

[State 40, 2]
Type = VarSet
Trigger1 = var(59)>0
Trigger1 = EnemyNear,StateType != L || P2BodyDist X >= 30
Trigger1 = EnemyNear,MoveType = H || Random <= 333 || EnemyNear,StateType = L
sysvar(1) = 1

[State 40, 3]
Type = VarSet
Trigger1 = var(59)>0
Trigger1 = EnemyNear,StateType != L
Trigger1 = EnemyNear,MoveType != H
Trigger1 = BackEdgeBodyDist>60
Trigger1 = Random <= 500
sysvar(1) = -1

[State 40, 4];小ジャンプ
Type = VelSet
Trigger1 = AnimTime = 0
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -3

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1


;---------------------------------------------------------------------------
;AI?彫?僕???
[Statedef 43]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
Type = VarSet
Trigger1 = time = 0
var(8) = 0

[State 40, 1];彫僕???
Type = VarSet
Trigger1 = time = 1
var(8) = 1





[State 40, 4];彫僕???
Type = VelSet
Triggerall = var(59)
Trigger1 = AnimTime = 0
Trigger1 = Var(8) = 1
x = const(velocity.jump.fwd.x) 
y = -5.7

[State 40, 4];彫僕???
Type = VelSet
Triggerall = var(59)
Trigger1 = AnimTime = 0
Trigger1 = Var(8) = 0
x = const(velocity.jump.fwd.x) 
y = -6.1



[State 40, 5]
Type = VelSet
Triggerall = var(59)
Trigger1 = AnimTime = 0
Trigger1 = prevStateno = 100
x = const(velocity.runjump.fwd.x)


[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;AI????僕???
[Statedef 44]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1



[State 40, 4]
Type = VelSet
Trigger1 = AnimTime = 0
x = const(velocity.jump.fwd.x)
y = const(velocity.jump.y)+3

[State 40, 5]
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = prevStateno = 100 ;RUN_FWD
x = const(velocity.runjump.fwd.x)

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1


;---------------------------------------------------------------------------
;??彫僕???
[Statedef 45]
Type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = , NT, ST, HT

[State 40, 2]
Type = VarSet
Trigger1 = 1
sysvar(1) = 0

[State 40, 1]
Type = VarSet
Trigger1 = 1
var(4) = 1

[State 40, 4]
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 0
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4];彫僕???
Type = VelSet
Trigger1 = AnimTime = 0
Trigger1 = var(4) = 1
x = Cond(sysvar(1)=0, const(velocity.jump.neu.x), Cond(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -7

[State 40, 6]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------
[Statedef 21]
Type = S
physics = S
sprpriority = 1
anim = 20
ctrl = 0

[State 20,]
Type = Turn
Trigger1 = P2dist X < 0

[State 20,]
Type = VelSet
Trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 20,]
Type = changeState
Trigger1 = roundState != 2
Trigger2 = p2bodydist X <= 15
Trigger3 = inguarddist
Trigger3 = random <= var(59)*100
value = 0
ctrl = 1

[Statedef 22]
Type = S
physics = S
sprpriority = 1
anim = 21
ctrl = 0

[State 22, 1]
Type = Turn
Trigger1 = P2dist X < 0

[State 22, 2]
Type = VelSet
Trigger1 = 1
x = const(velocity.walk.back.x)

[State 22, 5]
Type = changeState
Trigger1 = roundState != 2
Trigger2 = p2bodydist x <= 240
Trigger3 = inguarddist
Trigger3 = random <= var(59)*100
value = 0
ctrl = 1

[StateDef 20]
Type = S
Physics = S
SprPriority = 0

[State changeState]
Type = ChangeState
TriggerAll = Var(59) != 0
Trigger1 = time = 0
Value = 0
Ctrl = 1
IgnoreHitPause = 1

[State 20, VelSet]
Type = VelSet
Trigger1 = 1
X = Cond((Command="holdback"), Const(Velocity.Walk.Back.X), Const(Velocity.Walk.Fwd.X))

[State 20, ChangeAnim]
Type = ChangeAnim
TriggerAll = Vel X > 0
Trigger1 = Anim != 20
Value = 20

[State 20, ChangeAnim]
Type = ChangeAnim
TriggerAll = Vel X < 0
Trigger1 = Anim != 21
Value = 21

[State 20, ChangeAnim]
Type = ChangeAnim
Trigger1 = Vel X = 0
Trigger1 = Anim != 0
Value = 0

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, 0]
type = playsnd
triggerall = anim = 47
trigger1 = animelem = 1
value = s47,0


[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
;ignorehitpause = 
;persistent = 


[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
Type = U    ;Leave State Type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
Type = ChangeAnim
Trigger1 = Time = 0
value = 120 + (StateType = C) + (StateType = A)*2

[State 120, 2]
Type = StateTypeSet
Trigger1 = Time = 0 && StateType = S
physics = S

[State 120, 3]
Type = StateTypeSet
Trigger1 = Time = 0 && StateType = C
physics = C

[State 120, 4]
Type = StateTypeSet
Trigger1 = Time = 0 && StateType = A
physics = A

[State 120, Hi to Lo]
Type = null;StateTypeSet
Triggerall = StateType = S
Trigger1 = !var(59)
Trigger1 = command = "holddown"
Trigger2 = var(59)
Trigger2 = enemyNear(var(57)),StateType != A
Trigger2 = Random <= var(59)*180
StateType = C
physics = C

[State 120, Lo to Hi]
Type = null;StateTypeSet
Triggerall = StateType = C
Trigger1 = !var(59)
Trigger1 = command != "holddown"
Trigger2 = var(59)
Trigger2 = enemyNear(var(57)),StateType = A
Trigger2 = Random <= var(59)*180
StateType = S
physics = S

[State 120, AI]
Type = StateTypeSet
TriggerAll = var(59)
TriggerAll = StateType = S
Trigger1 = var(48) = 1
StateType = C
Physics = C

[State 120, AI]
Type = StateTypeSet
TriggerAll = var(59)
TriggerAll = StateType = C             
Trigger1 = var(48) = 2
StateType = S
Physics = s

[State 120, Hi to Lo]
Type = StateTypeSet
Triggerall = StateType = S
Triggerall = !var(59)
Trigger1 = command = "holddown"
StateType = C
physics = C

[State 120, Lo to Hi]
Type = StateTypeSet
Triggerall = StateType = C
Triggerall = !var(59)
Trigger1 = command != "holddown"
StateType = S
physics = S


[State 120, 5]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 130 + (StateType = C) + (StateType = A)*2

[State 120, Stop Guarding]
Type = ChangeState
;Triggerall = !var(25)
Trigger1 = !var(59)
Trigger1 = command != "holdback"
Trigger2 = !inguarddist
value = 140

[State 120, Stop Guarding]
Type = ChangeState
Triggerall = var(59)
Triggerall = !inguarddist
Trigger1 = enemynear(var(58)),moveType != A 
Trigger2 = p2bodydist x >= 0
Trigger2 = numhelper(31000+ID)
Trigger2 = !helper(31000+ID),inguarddist 
value = 140
ignorehitpause = 1

[State 120, AI]
Type = null;ChangeState
TriggerAll = var(59)
Trigger1 = !InGuardDist
Trigger1 = !(Facing*(EnemyNear,Facing)*P2Dist X >0 && (Abs(P2Dist X) <= 45) && P2MoveType=A)
Value = 140

;---------------------------------------------------------------------------
;STAND GUARD (guarding)
[Statedef 130]
Type    = S
physics = S

[State 130, 1]
Type = ChangeAnim
Trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
Type = ChangeState
;Triggerall = var(25)
Trigger1 = !var(59)
Trigger1 = command = "holdback"
Trigger1 = command = "holddown"
;Trigger2 = var(59)
;Trigger2 = enemyNear(var(57)),StateType != A
;Trigger2 = Random <= var(59)*180
value = 131

[State 130, Stop Guarding]
Type = ChangeState
Trigger1 = command != "holdback"
Trigger1 = var(59) = 0
Trigger2 = !inguarddist
value = 140

[State 120, Stop Guarding]
Type = ChangeState
Triggerall = var(59)
Triggerall = !inguarddist
Trigger1 = enemynear(var(58)),moveType != A 
Trigger2 = p2bodydist x >= 0
Trigger2 = numhelper(31000+ID)
Trigger2 = !helper(31000+ID),inguarddist 
value = 140
ignorehitpause = 1


[State 120, AI]
Type = null;ChangeState
TriggerAll = var(59)
Trigger1 = !InGuardDist
Trigger1 = !(Facing*(EnemyNear,Facing)*P2Dist X >0 && (Abs(P2Dist X) <= 45) && P2MoveType=A)
Value = 140

;---------------------------------------------------------------------------
;CROUCH GUARD (guarding)
[Statedef 131]
Type    = C
physics = C

[State 131, 1]
Type = ChangeAnim
Trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
Type = ChangeState
;Triggerall = var(25)
Trigger1 = !var(59)
Trigger1 = command  = "holdback"
Trigger1 = command != "holddown"
;Trigger2 = var(59)
;Trigger2 = enemyNear(var(57)),StateType = A
;Trigger2 = Random <= var(59)*180
value = 130

[State 131, Stop Guarding]
Type = ChangeState
;Triggerall = !var(25)
Trigger1 = !var(59)
Trigger1 = command != "holdback"
Trigger2 = !inguarddist
value = 140


[State 120, Stop Guarding]
Type = ChangeState
Triggerall = var(59)
Triggerall = !inguarddist
Trigger1 = enemynear(var(58)),moveType != A 
Trigger2 = p2bodydist x >= 0
Trigger2 = numhelper(31000+ID)
Trigger2 = !helper(31000+ID),inguarddist 
value = 140
ignorehitpause = 1


[State 120, AI]
Type = null;ChangeState
TriggerAll = var(59)
Trigger1 = !InGuardDist
Trigger1 = !(Facing*(EnemyNear,Facing)*P2Dist X >0 && (Abs(P2Dist X) <= 45) && P2MoveType=A)
Value = 140

;---------------------------------------------------------------------------
;AIR GUARD (guarding)
[Statedef 132]
Type    = A
physics = N

[State 132, 1]
Type = ChangeAnim
Trigger1 = Anim != 132
value = 132

[State 132, 2]
Type = VelAdd
Trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
Type = VarSet
Trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
Type = VelSet
Trigger1 = sysvar(0)
y = 0

[State 132, 5]
Type = PosSet
Trigger1 = sysvar(0)
y = 0

[State 132, 6]
Type = ChangeState
Triggerall = sysvar(0)
Trigger1 = !var(59)
Trigger1 = command = "holdback"
;Trigger1 = inguarddist
;Trigger2 = var(59)
;Trigger2 = inguarddist
value = 130

[State 132, 7]
Type = ChangeState
Trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
Type = ChangeState
;Triggerall = !var(25)
Trigger1 = var(59) <= 0
Trigger1 = command != "holdback"
Trigger2 = !inguarddist
value = 140

[State 120, Stop Guarding]
Type = ChangeState
Triggerall = var(59)
Triggerall = !inguarddist
Trigger1 = enemynear(var(58)),moveType != A 
Trigger2 = p2bodydist x >= 0
Trigger2 = numhelper(31000+ID)
Trigger2 = !helper(31000+ID),inguarddist 
value = 140
ignorehitpause = 1


[State 120, AI]
Type = null;ChangeState
TriggerAll = var(59)
Trigger1 = !InGuardDist
Value = 140

;---------------------------------------------------------------------------
;GUARD (end)
[Statedef 140]
Type = U    ;Leave State Type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
Type = ChangeAnim
Trigger1 = Time = 0
value = 140 + (StateType = C) + (StateType = A)*2

[State 140, 2]
Type = StateTypeSet
Trigger1 = Time = 0 && StateType = S
physics = S

[State 140, 3]
Type = StateTypeSet
Trigger1 = Time = 0 && StateType = C
physics = C

[State 140, 4]
Type = StateTypeSet
Trigger1 = Time = 0 && StateType = A
physics = A

[State 140, Hi to Lo]
Type = StateTypeSet
Triggerall = StateType = S
Trigger1 = !var(59)
Trigger1 = command = "holddown"
;Trigger2 = var(59)
;Trigger2 = enemyNear(var(57)),StateType != A
;;Trigger2 = Random <= var(59)*180
StateType = C
physics = C

[State 140, Lo to Hi]
Type = StateTypeSet
Triggerall = StateType = C
Trigger1 = !var(59)
Trigger1 = command != "holddown"
;Trigger2 = var(59)
;Trigger2 = enemyNear(var(57)),StateType = A
;Trigger2 = Random <= var(59)*180
StateType = S
physics = S


[State 120, AI]
Type = StateTypeSet
TriggerAll = var(59)
TriggerAll = StateType = S
Trigger1 = var(48) = 1
StateType = C
Physics = C

[State 120, AI]
Type = StateTypeSet
TriggerAll = var(59)
TriggerAll = StateType = C
Trigger1 = var(48) = 2
StateType = S
Physics = S

;[State 140, 5] ;Implemented within engine
;Type = ChangeState
;Trigger1 = AnimTime = 0
;value = (StateType = C)*11 + (StateType = A)*51

;---------------------------------------------------------------------------
;SGUARDHIT (shaking)
[Statedef 150]
Type    = S
moveType= H
physics = N
velset = 0,0

[State 150, 1]
Type = ChangeAnim
Trigger1 = 1
value = 150

[State 150, 2]
Type = ChangeState
Trigger1 = HitShakeOver
value = 151 + 2*Cond(var(59)=0,(command = "holddown"),((enemyNear(var(58)),StateType=A)))

[State 150, Hi to Lo]
Type = StateTypeSet
Triggerall = StateType = S
Trigger1 = !var(59)
Trigger1 = command = "holddown"
;Trigger2 = var(59)
;Trigger2 = enemyNear(var(57)),StateType != A
;Trigger2 = Random <= var(59)*180
StateType = C
physics = C

[State 150, Lo to Hi]
Type = StateTypeSet
Triggerall = StateType = C
Trigger1 = !var(59)
Trigger1 = command != "holddown"
;Trigger2 = var(59)
;Trigger2 = enemyNear(var(57)),StateType = A
;Trigger2 = Random <= var(59)*180
StateType = S
physics = S


[State 120, AI]
Type = StateTypeSet
TriggerAll = var(59)
TriggerAll = StateType = S
Trigger1 = var(48) = 1
StateType = C
Physics = C

[State 120, AI]
Type = StateTypeSet
TriggerAll = var(59)
TriggerAll = StateType = C
Trigger1 = var(48) = 2
StateType = S
Physics = S


[State 150, 3]
Type = ForceFeedback
Trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
;SGUARDHIT2 (knocked back)
[Statedef 151]
Type    = S
moveType= H
physics = S
anim = 150

[State 151, 1]
Type = HitVelSet
Trigger1 = Time = 0
x = 1

[State 151, 2]
Type = VelSet
Trigger1 = Time = GetHitVar(slidetime)
Trigger2 = HitOver
x = 0

[State 151, 3]
Type = CtrlSet
Trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 120, AI]
Type = StateTypeSet
TriggerAll = var(59)
TriggerAll = StateType = S
Trigger1 = var(48) = 1
StateType = C
Physics = C

[State 120, AI]
Type = StateTypeSet
TriggerAll = var(59)
TriggerAll = StateType = C
Trigger1 = var(48) = 2
StateType = S
Physics = S

[State 151, Hi to Lo]
Type = StateTypeSet
Triggerall = StateType = S
Trigger1 = !var(59)
Trigger1 = command = "holddown"
;Trigger2 = var(59)
;Trigger2 = enemyNear(var(57)),StateType != A
;Trigger2 = Random <= var(59)*180
StateType = C
physics = C

[State 151, Lo to Hi]
Type = StateTypeSet
Triggerall = StateType = C
Trigger1 = !var(59)
Trigger1 = command != "holddown"
;Trigger2 = var(59)
;Trigger2 = enemyNear(var(57)),StateType = A
;Trigger2 = Random <= var(59)*180
StateType = S
physics = S

[State 151, 4]
Type = ChangeState
Trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
;CGUARDHIT (shaking)
[Statedef 152]
Type    = C
moveType= H
physics = N
velset = 0,0

[State 152, 1]
Type = ChangeAnim
Trigger1 = 1
value = 151

[State 152, 3]
Type = ChangeState
Trigger1 = HitShakeOver
value = 151 + 2*Cond(var(59)=0,(command = "holddown"),((enemyNear(var(58)),StateType=A)))

[State 152, Hi to Lo]
Type = StateTypeSet
Triggerall = StateType = S
Trigger1 = !var(59)
Trigger1 = command = "holddown"
;Trigger2 = var(59)
;Trigger2 = enemyNear(var(57)),StateType != A
;Trigger2 = Random <= var(59)*180
StateType = C
physics = C

[State 152, Lo to Hi]
Type = StateTypeSet
Triggerall = StateType = C
Trigger1 = !var(59)
Trigger1 = command != "holddown"
;Trigger2 = var(59)
;Trigger2 = enemyNear(var(57)),StateType = A
;Trigger2 = Random <= var(59)*180
StateType = S
physics = S

[State 120, AI]
Type = StateTypeSet
TriggerAll = var(59)
TriggerAll = StateType = S
Trigger1 = var(48) = 1
StateType = C
Physics = C

[State 120, AI]
Type = StateTypeSet
TriggerAll = var(59)
TriggerAll = StateType = C
Trigger1 = var(48) = 2
StateType = S
Physics = S

[State 152, 4]
Type = ForceFeedback
Trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
;CGUARDHIT2 (knocked back)
[Statedef 153]
Type    = C
moveType= H
physics = C
anim = 151

[State 153, 1]
Type = HitVelSet
Trigger1 = Time = 0
x = 1

[State 153, 2]
Type = VelSet
Trigger1 = Time = GetHitVar(slidetime)
Trigger2 = HitOver
x = 0

[State 153, 3]
Type = CtrlSet
Trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 120, AI]
Type = StateTypeSet
TriggerAll = var(59)
TriggerAll = StateType = S
Trigger1 = var(48) = 1
StateType = C
Physics = C

[State 120, AI]
Type = StateTypeSet
TriggerAll = var(59)
TriggerAll = StateType = C
Trigger1 = var(48) = 2
StateType = S
Physics = S

[State 153, Hi to Lo]
Type = StateTypeSet
Triggerall = StateType = S
Trigger1 = !var(59)
Trigger1 = command = "holddown"
;;Trigger2 = var(59)
;Trigger2 = enemyNear(var(57)),StateType != A
;Trigger2 = Random <= var(59)*180
StateType = C
physics = C

[State 153, Lo to Hi]
Type = StateTypeSet
Triggerall = StateType = C
Trigger1 = !var(59)
Trigger1 = command != "holddown"
;Trigger2 = var(59)
;Trigger2 = enemyNear(var(57)),StateType = A
;Trigger2 = Random <= var(59)*180
StateType = S
physics = S

[State 153, 4]
Type = ChangeState
Trigger1 = HitOver
value = 131
ctrl = 1
;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
Type    = A
moveType= H
physics = N
velset = 0,0

[State 154, 1]
Type = ChangeAnim
Trigger1 = 1
value = 152

[State 154, 2]
Type = ChangeState
Trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
Type = ForceFeedback
Trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
Type    = A
moveType= H
physics = N
anim = 152

[State 155, 1]
Type = HitVelSet
Trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
Type = VelAdd
Trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
Type = CtrlSet
Trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
Type = VarSet
Trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
Type = VelSet
Trigger1 = sysvar(0)
y = 0

[State 155, 6]
Type = PosSet
Trigger1 = sysvar(0)
y = 0


[State 155, 6]
Type = ChangeState
Triggerall = sysvar(0)
Triggerall = inguarddist
Trigger1 = var(59) =0
Trigger1 = command = "holdback"
Trigger2 = var(59) 
value = 130

[State 155, 7]
Type = ChangeState
Trigger1 = sysvar(0)
value = 52


;---------------------------------------------------------------------------
; commonより ダッシュ
[Statedef 100]
Type    = S
physics = S
anim = 100
sprpriority = 1
ctrl = 1

[State 00]
Type = PlaySnd
Trigger1 = Time= 0
value = 100, 0
loop = 1
channel = 1

[State 01]
Type = VelSet
Trigger1 = 1
x = const(velocity.run.fwd.x)

[State 02] ;Prevent run from canceling into walk
Type = AssertSpecial
Trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
Type = AssertSpecial
Trigger1 = 1
flag = NoAutoTurn

[State 04]
Type = ChangeState
Triggerall = Var(59) = 0
Trigger1 = command != "holdfwd"
value = 0

[State 100,AI]
Type = ctrlset
Trigger1 = var(59) != 0
value = 0

[State 100,?????????? DashStop]
Type =ChangeState
TriggerAll = var(59) != 0
Triggerall = roundState=2
Triggerall = AnimElemtime(2) >= 0
Trigger1 = inguarddist&&EnemyNear(floor(fvar(37))),moveType=A&&p2Stateno>=200
Trigger2 = EnemyNear(floor(fvar(37))),MoveType!=H || EnemyNear(floor(fvar(37))),Stateno = 5120
Trigger2 = P2BodyDist X<=80|| var(52)<82
Trigger2 = P2BodyDist Y>=-500|| var(52)<82
Trigger3 = P2BodyDist X<=30|| var(52)<82
Trigger4 = !Enemy,Alive
value = 0
ctrl = 1


[State 751, ChangeState]
Type = ChangeState
TriggerAll = Var(41)>0&&PrevStateNo = 950
TriggerAll = Time>1
TriggerAll = Var(42) = 1
Trigger1 = var(59)
Trigger1 = EnemyNear(Floor(fvar(37))),StateType!=A
Trigger1 = Abs(EnemyNear(Floor(fvar(37))),Pos x-Pos x)<76
value = 400




;---------------------------------------------------------------------------
; commonより バックステップ
[Statedef 105]
Type    = S
physics = S
ctrl = 0
anim = 104
velset = 0,0


[State 00]
Type = ChangeState
Trigger1 = animtime = 0
value = 106

; 空中
[Statedef 106]
Type    = A
physics = A
ctrl = 1
anim = 105
sprpriority = 1

[State 00]
Type = VelSet
Trigger1 = Time = 0
x = -6.0
y = -4.0

[State 01]
Type = ChangeState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
value = 107



; 着地
[Statedef 107]
Type    = S
physics = N
ctrl = 0
anim = 106
velset = 0,0

[State 00]
Type = VelSet
Trigger1 = Time = 0
x = 0
y = 0

[State 01]
Type = PosSet
Trigger1 = Time = 0
y = 0

[State 02]
Type = MakeDust
Trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 03]
Type = ChangeState
Trigger1 = animtime = 0
value = 0
ctrl = 1




;---------------------------------------------------------------------------
; タイムオーバーで負けた時
[Statedef 170]
Type = S
ctrl = 0
anim = 170
velset = 0,0

[State 00]
Type = NotHitBy
Trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; 勝った動作
[Statedef 180]
Type = S

[State 00]
Type = VarRandom
Trigger1 = Time = 0
v = 2
range = 0,2

[State 01]
Type = ChangeState
Trigger1 = matchover = 1
Trigger1 = var(2) = 0
value = 181

[State 01]
Type = ChangeState
Trigger1 = matchover = 1
Trigger1 = var(2) = 1
value = 181

[State 01]
Type = ChangeState
Trigger1 = matchover = 1
Trigger1 = var(2) = 2
value = 181

[State 01]
Type = ChangeState
Trigger1 = matchover = 0
value = 181



;---------------------------------------------------------------------------
; 勝った動作[では、ごきげんよう]
[Statedef 181]
Type = S
ctrl = 0
anim = 181
velset = 0,0

[State 00];では
Type = PlaySnd
Trigger1 = animelem = 10
value = 181,0

[State 181, 1]
Type = NotHitBy
Trigger1 = 1
value = SCA
time = 1
;---------------------[効果音]


;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 6
id = 252
name = "ka-do"
sprpriority = 2
pos = 17,-73
posType = p1
Stateno = 252
helperType = normal
keyctrl = 0 
ownpal = 1

[State 181, 4]
Type = AssertSpecial
Trigger1 = time = [0,190]
flag = roundnotover

;---------------------------------------------------------------------------
; 勝った動作[ご堪能いただけたかな？]
[Statedef 182]
Type = S
ctrl = 0
anim = 182
velset = 0,0

[State 00];ご堪能いただけたかな？
Type = PlaySnd
Trigger1 = animelem = 6
value = 182,0

[State 181, 1]
Type = NotHitBy
Trigger1 = 1
value = SCA
time = 1

[State 181, 4]
Type = AssertSpecial
Trigger1 = time = [0,190]
flag = roundnotover

;---------------------------------------------------------------------------
; 勝った動作[仕方の無い人ですね]
[Statedef 183]
Type = S
ctrl = 0
anim = 183
velset = 0,0

[State 00];仕方の無い人ですね
Type = PlaySnd
Trigger1 = animelem = 4
value = 183,0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = time = 0
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,-294
posType = p1
Stateno = 184
helperType = normal
keyctrl = 0 
ownpal = 1

[State 181, 1]
Type = NotHitBy
Trigger1 = 1
value = SCA
time = 1

[State 181, 4]
Type = AssertSpecial
Trigger1 = time = [0,190]
flag = roundnotover

;---------------------------------------------------------------------------
;(HELPER)帽子
[Statedef 184]
Type = A
ctrl = 0
anim = 184
velset = 0,7
moveType = A
physics = S
sprpriority = 2


[State 2]
Type = destroyself
Trigger1 = time = 42



[Statedef 185]
Type = S
ctrl = 0
anim = 185
velset = 0,0

[State 00];仕方の無い人ですね
Type = PlaySnd
Trigger1 = animelem = 2
value = 185,0


[State 181, 1]
Type = NotHitBy
Trigger1 = 1
value = SCA
time = 1

[State 181, 4]
Type = AssertSpecial
Trigger1 = time = [0,130]
flag = roundnotover


;---------------------------------------------------------------------------
; 通常登場
[Statedef 190]
Type = S
ctrl = 0
anim = 190
velset = 0,0


[State 00]
Type = VarRandom
Trigger1 = Time = 1
v = 2
range = 0,2

[State 01]
Type = ChangeState
Trigger1 = var(2) = 0
value = 193

[State 01]
Type = ChangeState
Trigger1 = var(2) = 1
value = 193

[State 01]
Type = ChangeState
Trigger1 = var(2) = 2
value = 193


[State a];そう怯える事もあるまい
Type = PlaySnd
Trigger1 = animelem = 2
value = 190,0



[State a] 
Type = AssertSpecial
Trigger1 = 1
flag = Intro

[State a] 
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; 通常登場その２
[Statedef 191]
Type = S
ctrl = 0
anim = 191
velset = 0,0

[State 00];オープンザゲーム
Type = PlaySnd
Trigger1 = animelem = 4
value = 191,0

[State 00];切る
Type = PlaySnd
Trigger1 = animelem = 5
value = 191,1


[State a] 
Type = AssertSpecial
Trigger1 = 1
flag = Intro

[State a] 
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0

;开场
[Statedef 193]
Type = S
ctrl = 0
anim = 193
velset = 0,0

[State a]
Type = PlaySnd
Trigger1 = animelem = 21 
value = 193,0

[State a];斬る
Type = PlaySnd
Trigger1 = animelem = 33
value = 500,1

[State a];斬る
Type = null;PlaySnd
Trigger1 = animelem = 39
value = 801,1



[State a] 
Type = AssertSpecial
Trigger1 = 1
flag = Intro

[State a] 
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; 通常登場その３
[Statedef 192]
Type = S
ctrl = 0
anim = 192
velset = 0,0

[State a];では、カーネフェルをお見せしよう
Type = PlaySnd
Trigger1 = animelem = 7
value = 192,0

[State a];斬る
Type = PlaySnd
Trigger1 = animelem = 30
value = 500,1

[State a];斬る
Type = PlaySnd
Trigger1 = animelem = 30
value = 801,1



[State a] 
Type = AssertSpecial
Trigger1 = 1
flag = Intro

[State a] 
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0



;---------------------------------------------------------------------------
; 挑発の動作
[Statedef 195]
Type = S
ctrl = 0
anim = 196
velset = 0,0
moveType = I
physics = S
sprpriority = 1

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 17,-73
posType = p1
Id = 252
Stateno = 252
helperType = normal
keyctrl = 0 
ownpal = 1


[State 191, 3];早くしたまえ
Type = PlaySnd
Trigger1 = animelem = 2
value = 195,0


[State 191, 3];カード
Type = PlaySnd
Trigger1 = animelem = 4
Trigger1 = var(2) = 1
value = 193,0

[State 195, 1]
Type = CtrlSet
Trigger1 = Time = 40
value = 1

[State 195, 2]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 遠距離立ち?弱?パンチ?の動作
[Statedef 200]
Type    = S                      
moveType= A                      
physics = S                      
juggle  = 8                      
;Commonly-used controllers:
velset = 0,0                     ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 200                       ;このステートで表示するスプライトステート番号(0で変化無し)
poweradd = 0                    ;このステートを使った時のパワー増加量(0で変化無し)

[State 200, 1]
Type = HitDef
Trigger1 = animelem = 2
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 22  , 0                   ;ダメージ量（左が当たった時、右はガードした時）
getpower = 41,20
animType = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = MA                   ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 3, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 8, 9                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s7020                      ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -5, -89               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = s510, 0                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guard.sparkno = s7010
guardsound = s120, 0                ;ガードした時の音（同上）
ground.Type = high               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 9             ;相手が後にすべる時間
ground.hittime  = 9             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -6             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.9,-2     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.Type = high                 ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間
ID = 200
nochainID = 1100
P2StateNo = 13103

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 2
value = 500, 0

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 2
value = 200,0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 2
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 201
helperType = normal
keyctrl = 0 
ownpal = 1


[State 200, 7]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 201]
Type = S
ctrl = 0
anim = 201
velset = 0,0
moveType = I
physics = S
sprpriority = 2
;---------------------[アニメーション]
[State a]
Type = changeanim
TriggerAll  = time = 0
Trigger1 = Root,Stateno = 210
Trigger2 = Root,Stateno = 4001 && root,animelem = 29
value = 211

[State a]
Type = changeanim
Triggerall = time = 0
Trigger1 = Root,Stateno = 215
Trigger2 = Root,Stateno = 4001 && root,animelem = 16
value = 216

[State a]
Type = changeanim
Triggerall = time = 0
Trigger1 = Root,Stateno = 240
Trigger2 = Root,Stateno = 4001 && root,animelem = 35
value = 241

[State a]
Type = changeanim
TriggerAll  = time = 0
Trigger1 = Root,Stateno = 245
Trigger2 = Root,Stateno = 4001 && root,animelem = 23
Trigger3 = Root,Stateno = 2602 && root,animelem = 7
value = 246


[State a]
Type = changeanim
TriggerAll  = time = 0
Trigger1 = Root,StateNo = 690
value = 691

[State a]
Type = changeanim
Trigger1 = time = 0
Trigger1 = Root,Stateno = 801
value = 802

;---------------------[ポジションの固定]
[State a]
Type = bindtoRoot
Trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = 1
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = 1
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H

;---------------------------------------------------------------------------
; 近距離立ち?弱?パンチ?の動作
[Statedef 205]
Type    = S                      
moveType= A                      
physics = S                      
juggle  = 8                      
;Commonly-used controllers:
velset = 0,0                     ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 200                       ;このステートで表示するスプライトステート番号(0で変化無し)
poweradd = 0                    ;このステートを使った時のパワー増加量(0で変化無し)
sprpriority = 1                  ;表示した絵の重なり具合(2一番前　0通常　-1奥)

[State 200, 1]
Type = HitDef
Trigger1 = animelem = 2
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 22 , 0                   ;ダメージ量（左が当たった時、右はガードした時）
getpower = 81,81
animType = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = MA                   ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 3, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 8, 8                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s7020                      ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -20, -88               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = s510, 0                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guard.sparkno = s7010
guardsound = s120, 0                ;ガードした時の音（同上）
ground.Type = high              ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 9             ;相手が後にすべる時間
ground.hittime  = 9             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -6             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.7,-2     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.Type = high                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間
ID = 200
nochainID = 1100
P2StateNo = 13103

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 2
value = 200,0

[State 200, 1]
Type = PlaySnd
Trigger1 = animelem = 2
value = 500, 0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 2
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 201
helperType = normal
keyctrl = 0 
ownpal = 1

[State 200, 7]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離強パンチ
[Statedef 210]
Type    = S
moveType= A
physics = S
juggle  = 8
poweradd= 50
ctrl = 0
velset = 0,0
anim = 210


[State 210, 1]
Type = PlaySnd
Trigger1 = animelem = 4
value = 210, 0

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 4
value = 500, 1

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 201
helperType = normal
keyctrl = 0 
ownpal = 1



[State 210, 2]
Type = HitDef
Trigger1 = animelem = 4
attr = S, NA
animType  = hard
damage    = 78
priority = 4, Hit
getpower = 91,53
guardflag = MA
pausetime = 11,11
sparkno = s7021
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s121,0
guard.sparkno = s7011
ground.Type = low
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -7.5
air.velocity = -2.5,-4
ID = 200
P2StateNo = 13103

[State 210, 5]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 近距離立ち?強?パンチ?の動作
[Statedef 215]
Type    = S
moveType= A
physics = S
juggle  = 8
poweradd= 50
ctrl = 0
velset = 0,0
anim = 215
sprpriority = 1

[State 200, 1]
Type = PlaySnd
Trigger1 = animelem = 3
value = 500, 1

[State 210, 1]
Type = PlaySnd
Trigger1 = animelem = 3
value = 210, 0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 3
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 201
helperType = normal
keyctrl = 0 
ownpal = 1


[State 210, 2]
Type = HitDef
Trigger1 = animelem = 2
attr = S, NA
animType  = hard
damage    = 60 
priority = 4, Hit
getpower = 91,53
guardflag = MA
pausetime = 11,12
sparkno = s7021
sparkxy = -30,-90
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.Type = high
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -7
P2StateNo = 13103
air.velocity = -4,-3
ID = 200
nochainID = 1100

[State 215, 2]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;遠距離 立ち?弱?キック
[Statedef 230]
Type    = S
moveType= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 1

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 3
value = 200,0

[State 230, 1]
Type = PlaySnd
Trigger1 = animelem = 3
value = 330, 0

[State 230, 2]
Type = HitDef
Trigger1 = animelem = 4
attr = S, NA
animType  = light
damage    = 45 
priority = 3, Hit
getpower = 41,20
guardflag = MA
pausetime = 7,8
sparkno = s7000
sparkxy = -15,-80
hitsound   = s430,0
guard.sparkno = s7010
guardsound = s120,0
P2StateNo = 13103
ground.Type = high
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -5
air.velocity = -2.5,-3.5
ID = 200
nochainID = 1100


[State 230, 3]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;侧踢
[Statedef 235]
Type    = S
moveType= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 235
sprpriority = 1

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 3
value = 200,0

[State 0, turn]
Type = turn
Trigger1 = p2dist x<0 && time = 0

[State 0, VelSet]
Type = VelSet
Trigger1 = Animelem = 2,>=0 && Animelem = 4,<0
x = Cond(Var(41)>900&&Prevstateno = 100,6.8,4.3)
y = 0
ignorehitpause = 1
;persistent = 

[State 0, VelSet]
Type = VelSet
Trigger1 = Animelem = 4,>=0
x = 0
y = 0
;ignorehitpause = 
;persistent = 

[State 230, 1]
Type = PlaySnd
Trigger1 = animelem = 3
value = 330, 0

[State 230, 2]
Type = HitDef
Trigger1 = animelem = 4
attr = S, NA
animType  = Heavy
damage    = 45 
priority = 3, Hit
getpower = 91,53
HitFlag = MAF
guardflag = MA
pausetime = 10,14
sparkno = s7000
sparkxy = -30,-95
P2StateNo = 13103
hitsound   = s201,7
guard.sparkno = s7010
guardsound = s120,0
ground.Type = high
ground.slidetime = 13
ground.hittime  = 20
ground.velocity = -4
air.velocity = -2.5,-3.5
ID = 200
nochainID = 1100

[State 230, 3]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;侧踢追击
[Statedef 236]
Type    = S
moveType= A
physics = N
juggle  = 8
poweradd= 50
ctrl = 0
velset = 0,0
anim = 236
sprpriority = 1

[State 0, VelSet]
type = VelSet
trigger1 = Time = [4,7]
x = 4.5
;ignorehitpause = 
;persistent = 

[State 0, VelSet]
type = VelSet
trigger1 = Time >7
x = 0
;ignorehitpause = 
;persistent = 


[State 410, 2]
Type = HitDef
Trigger1 = animelem = 4
attr = S, NA
damage    = 98
priority = 4, Hit
animType  = hard
hitflag = MA
guardflag = MA
pausetime = 11,12
getpower = 91,53
sparkno = s7021
sparkxy = -10,-22
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.Type = low
ground.slidetime = 10
ground.hittime  = 17
ground.velocity = -5
air.velocity = -3,-5
fall = 0
fall.recover = 0
P2StateNo = 13103

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 4
value = 500, 1

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 3
value = 210,0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 401
helperType = normal
keyctrl = 0 
ownpal = 1

[State 410, 4]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離 立ち?強?キック
[Statedef 240]
Type    = S
moveType= A
physics = N
juggle  = 8
poweradd= 50
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 1


[State 200, 1]
Type = PlaySnd
Trigger1 = animelem = 3
value = 500, 1

[State 210, 1]
Type = PlaySnd
Trigger1 = animelem = 3
value = 210, 0


;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 201
helperType = normal
keyctrl = 0 
ownpal = 1


[State 240, 2]
Type = HitDef
Trigger1 = animelem = 4
attr = S, NA
animType  = hard
damage    = 78
priority = 4, Hit
getpower = 91,53
guardflag = MA
pausetime = 11,12
sparkno = s7021
sparkxy = -15,-63
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.Type = high
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -7.5
air.velocity = -3,-5.2
ID = 200
P2StateNo = 13103
nochainID = 1100

[State 240, 4]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 近距離立ち?強?キック
[Statedef 245]
Type    = S
moveType= A
physics = N
juggle  = 7
poweradd= 50
ctrl = 0
velset = 0,0
anim = 245
sprpriority = 1

[State 200, 1]
Type = PlaySnd
Trigger1 = animelem = 3
value = 500, 1

[State 210, 1]
Type = PlaySnd
Trigger1 = animelem = 3
value = 210, 0


;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 3
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 201
helperType = normal
keyctrl = 0 
ownpal = 1


[State 240, 2]
Type = HitDef
Trigger1 = animelem = 3
attr = S, NA
animType  = hard
damage    = 60
priority = 5, Hit
getpower = 91,53
guardflag = MA
pausetime = 11,12
sparkno = s7021
sparkxy = -25,-60
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.Type = low
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -7
air.velocity = -2,-5
fall = 0
fall.recover = 0
ID = 200
nochainID = 1100
P2StateNo = 13103

[State 240, 4]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;J
[Statedef 250]
Type    = S
moveType= A
physics = N
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 1

;---------------------[効果音]
[State 240, 1];ベッド
Type = PlaySnd
Trigger1 = animelem = 2
value = 250, 0

[State 200, 1];振り
Type = PlaySnd
Trigger1 = animelem = 8
value = 500, 0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 8
id = 3000
name = "ka-do"
sprpriority = 2
pos = 17,-73
posType = p1
Id = 252
Stateno = 252
helperType = normal
keyctrl = 0 
ownpal = 1


[State 240, 4]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;J(キャンセル版)
[Statedef 251]
Type    = S
moveType= A
physics = N
juggle  = 7
poweradd= 0
ctrl = 0
velset = 0,0
anim = 251
sprpriority = 1

[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 


;---------------------[効果音]
[State 240, 1];ベッド
Type = PlaySnd
Trigger1 = animelem = 2
value = 250, 0

[State 200, 1];振り
Type = PlaySnd
Trigger1 = animelem = 8
value = 500, 0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 8
id = 252
name = "ka-do"
sprpriority = 2
pos = 17,-73
posType = p1
Stateno = 252
helperType = normal
keyctrl = 0 
ownpal = 1


[State 240, 4]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)カード1
[Statedef 252]
Type = A
ctrl = 0
anim = 252
velset = Cond(Root,Stateno!=1563,8,13),Cond(Root,Stateno!=1563,12,6)
moveType = A
physics = N
sprpriority = 2

[State 700, 2];無敵の状態を作る
Type = NotHitBy
Trigger1 = 1
value = SCA

[State 0, VarSet]
Type = VarSet
Trigger1 = Movehit = 1
v = 0    ;fv = 10
value = 1
ignorehitpause = 1
;persistent = 

;---------------------[攻撃判定]
[State 410, 2]
Type = HitDef
TriggerAll = Root,Stateno!=195
TriggerAll = Root,Stateno!=1563
Trigger1 = time = 0
attr = A, NA
damage    = 54
priority = 4, Hit
animType  = hard
hitflag = FLD
guardflag = L
pausetime = 0,11
getpower = 121,121
sparkno = s7021
sparkxy = -10,0
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.Type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2,-6
air.velocity = -2,-6
fall = 1
yaccel = const(Movement.yaccel)
air.fall = 1
fall.recover = 0
P2StateNo = 95632
ID = 410
nochainID = 1100,410

;---------------------[攻撃判定]
[State 410, 2]
Type = HitDef
TriggerAll = Root,Stateno = 1563
Trigger1 = time = 0
attr = A, NA
damage    = 108
priority = 4, Hit
animType  = hard
hitflag = MAFD
guardflag = MA
pausetime = 0,11
getpower = 121,121
sparkno = s7021
sparkxy = -10,0
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.Type = low
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = -2
air.velocity = -2,-6
fall = 0
air.fall = 1
fall.recover = 0
P2StateNo = 13103


;---------------------[立ちステートに戻る]
[State a]
Type = changeState
Trigger1 = vel y >0 && pos y >= -10
value = 253

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 253]
Type = S
ctrl = 0
anim = 253
velset = 0,0
moveType = I
physics = S
sprpriority = 2

[State 200, 5]
Type = PlaySnd
Trigger1 = time = 0
value = 250,1


;---------------------[ポジションの固定]
[State a]
Type = posset
Trigger1 = time = 0
y = 0

;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = 1
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = 1
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = time >= 20
Trigger2 = Root,moveType = H



;---------------------------------------------------------------------------
; ふっ飛ばし攻撃
[Statedef 290]
Type    = S
moveType= A
physics = S
juggle  = 50
poweradd= 50
ctrl = 0
velset = 0,0
anim = 290
sprpriority = 2

[State 240, 1]
Type = PlaySnd
Trigger1 = animelem = 3
value = 390, 0

[State 200, 1];
Type = PlaySnd
Trigger1 = Time = 1
value = 290, 0

[State 0, VelSet]
Type = VelSet
Trigger1 = Time = 13
x = -2
y = -4.6

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Time>12
statetype = A       ;S,A,C,L
movetype = A      ;I,A,H
physics = N         ;A,C,S,N

[State 0, VelAdd]
Type = VelAdd
Trigger1 = Time>=13
x = 0
y = .36

[State 240, 2]
Type = HitDef
Trigger1 = Time = 0
attr = S, NA
animType  = Heavy
damage    = 83 
priority = 6, Hit
getpower = 162,162
guardflag = MA
pausetime = 11,12
sparkno = s7001
sparkxy = -15,-95
hitsound   = s490,0
guard.sparkno = s7011
guardsound = s121,0
ground.Type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6.5
air.velocity = -5,-6.8
yaccel = 0.45
fall = 1
fall.recover = 0
ID = 1300
nochainID = 1100
P2StateNo = 13103

[State 240, 4]
Type = ChangeState
Trigger1 = Vel y>0&& Pos y>=0
value = 52
anim = 47


;---------------------------------------------------------------------------
; ガードキャンセルふっ飛ばし攻撃
[Statedef 291]
Type    = S
moveType= A
physics = S
juggle  = 50
poweradd= -500
ctrl = 0
velset = 0,0
anim = 290
sprpriority = 1


[State 0, VelSet]
Type = VelSet
Trigger1 = Time = 13
x = -3.4
y = -4.6
;ignorehitpause = 
;persistent = 

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Time>12
statetype = A       ;S,A,C,L
movetype = A      ;I,A,H
physics = N         ;A,C,S,N
;ignorehitpause = 
;persistent = 

[State 0, VelAdd]
Type = VelAdd
Trigger1 = Time>=13
x = 0
y = .36
;ignorehitpause = 
;persistent = 


[State 700, 2];無敵の状態を作る
Type = NotHitBy
Triggerall = 1
Trigger1 = 1
value = SCA

[State 3040, 7];画面フラッシュ
Type = EnvColor
Trigger1 = movehit = 1
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 1

[State 240, 1]
Type = PlaySnd
Trigger1 = animelem = 3
value = 390, 0

[State 200, 1];
Type = PlaySnd
Trigger1 = Time = 1
value = 290, 0


[State 240, 2]
Type = HitDef
Trigger1 = Time = 0
attr = S, NA
animType  = diagup
damage    = 45
priority = 6, Hit
getpower = 0,0
guardflag = MA
pausetime = 11,12
sparkno = s7001
sparkxy = -15,-95
hitsound   = s490,0
guard.sparkno = s7011
guardsound = s120,0
ground.Type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -6,-6.5
air.velocity = -6,-6.8
fall = 1
fall.recover = 0
ID = 200
nochainID = 1100
P2StateNo = 13103
kill = 0

[State 240, 4]
Type = ChangeState
Trigger1 = Vel y>0&& Pos y>=0
value = 52
anim = 47

;---------------------------------------------------------------------------
;屈み?弱?パンチ
[Statedef 400]
Type    = C
moveType= A
physics = C
juggle  = 8
poweradd= 0
ctrl = 0
anim = 400
sprpriority = 1

[State 400, 2]
Type = HitDef
Trigger1 = animelem = 2
attr = C, NA
damage    = 36 
priority = 3, Hit
animType  = Light
hitflag = MAF
guardflag = M
getpower = 41,20
pausetime = 7,8
sparkno = s7020
sparkxy = -10,-53
hitsound   = s510,0
guard.sparkno = s7010
guardsound = s120,0
ground.Type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -3
air.velocity = -2.5,-3
ID = 200
nochainID = 1100
P2StateNo = 13103

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 2
value = 500, 0

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 2
value = 200,0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 2
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 401
helperType = normal
keyctrl = 0 
ownpal = 1




[State 400, 4]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 401]
Type = S
ctrl = 0
anim = 401
velset = 0,0
moveType = I
physics = S
sprpriority = 2
;---------------------[アニメーション]
[State a]
Type = changeanim
Trigger1 = time = 0
Trigger1 = Root,Stateno = 410
Trigger2 = Root,Stateno = 236
Trigger3 = Root,Stateno = 2602 && Root ,Animelem = 20
value = 411

[State a]
Type = changeanim
Trigger1 = time = 0
Trigger1 = Root,Stateno = 440
Trigger1 = Root,animelem = 3
value = 442

[State a]
Type = changeanim
Triggerall = time = 0
Trigger1 = Root,Stateno = 450
Trigger2 = Root,Stateno = 451
value = 452




;---------------------[ポジションの固定]
[State a]
Type = bindtoRoot
Trigger1 = 1
facing = 1
pos = 0,Cond(Root,Stateno = 236, -12,0)

;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = 1
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = 1
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H

;---------------------------------------------------------------------------
;屈み?強?パンチ
[Statedef 410]
Type    = C
moveType= A
physics = N
juggle  = 8
poweradd= 50
ctrl = 0
velset = 0,0
anim = 410
sprpriority = 1


[State 410, 2]
Type = HitDef
Trigger1 = animelem = 4
attr = C, NA
damage    = 98
priority = 4, Hit
animType  = hard
hitflag = MA
guardflag = MA
pausetime = 11,12
getpower = 91,53
sparkno = s7021
sparkxy = -10,-22
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.Type = low
ground.slidetime = 10
ground.hittime  = 17
ground.velocity = -6
air.velocity = -3,-5
fall = 0
fall.recover = 0
ID = 410
nochainID = 1100,410
P2StateNo = 13103

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 4
value = 500, 1

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 3
value = 210,0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 401
helperType = normal
keyctrl = 0 
ownpal = 1

[State 410, 4]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み?弱?キック
[Statedef 430]
Type    = C
moveType= A
physics = C
juggle  = 8
poweradd= 0
ctrl = 0
anim = 430
sprpriority = 1

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 1
value = 200,0

[State 430, 1]
Type = PlaySnd
Trigger1 = animelem = 2
value = 330, 0


[State 430, 2]
Type = HitDef
Trigger1 = Time = 0 
attr = C, NA
damage    = 36 
priority = 3, Hit
animType  = Light
hitflag = MAF
guardflag = L
pausetime = 7,8
sparkno = s7000
sparkxy = -10,-12
hitsound   = s430,0
getpower = 41,20
guard.sparkno = s7010
guardsound = s120,0
ground.Type = Low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -3
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20
ID = 200
nochainID = 1100
P2StateNo = 13103

[State 430, 3]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み?強?キック
[Statedef 440]
Type    = C
moveType= A
physics = C
juggle  = 6
poweradd= 0
ctrl = 0
anim = 440
sprpriority = 1


[State 440, 3]
Type = HitDef
Trigger1 = animelem = 3
attr = C, NA
damage    = 45 
priority = 4, Hit
hitflag = MAF
guardflag = L
pausetime = 11,22
sparkno = s7021
getpower = 91,53
sparkxy = -15,-34
hitsound   = s510,1
guardsound = s121,0
guard.sparkno = s7011
ground.Type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -2,-2.5
air.velocity = -2,-2.5
guard.velocity = -5
fall = 1
fall.recover = 0
ID = 200
nochainID = 1100
P2StateNo = 13103

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 3
value = 500, 1

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 2
value = 210,0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 3
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 401
helperType = normal
keyctrl = 0 
ownpal = 1



[State 440, 4]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
;10
[Statedef 450]
Type    = C
moveType= A
physics = N
juggle  = 7
poweradd= 0
ctrl = 0
velset = 0,0
anim = 450
sprpriority = 1


[State 410, 2]
Type = HitDef
Trigger1 = animelem = 4
attr = C, NA
damage    = 107
priority = 4, Hit
animType  = hard
hitflag = MA
guardflag = MA
pausetime = 11,12
getpower = 141,141
sparkno = s7021
sparkxy = -10,-72
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.Type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3.5,-6
air.velocity = -3.5,-6
yaccel = 0.42
fall = 1
fall.recover = 0
ID = 410
P2StateNo = 13103

[State 200, 1];レイズ
Type = PlaySnd
Trigger1 = animelem = 4
value = 450, 0

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 4
value = 500,0

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 4
value = 450,1

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = -15,0
posType = p1
Stateno = 401
helperType = normal
keyctrl = 0 
ownpal = 1

[State 410, 4]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
;10(キャンセル版)
[Statedef 451]
Type    = S
moveType= A
physics = S
juggle  = 6
poweradd= 0
ctrl = 0
velset = 0,0
anim = 451
sprpriority = 1

[State 1100, Velocity]
Type = Veladd
Trigger1 = animelemtime(3) <= 1
x = 3.5

[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = time = [0,5]
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
;ignorehitpause = 
;persistent = 


[State 1100, Velocity]
Type = Veladd
Trigger1 = animelemtime(5) >= 1
Trigger1 = animelemtime(6) <= 1
x = -2.5

[State 0, PlayerPush]
Type = PlayerPush
Trigger1 = 1
value = 1
;ignorehitpause = 
;persistent = 


[State 410, 2]
Type = HitDef
Trigger1 = animelem = 10
attr = C, NA
damage    = 71 
priority = 4, Hit
animType  = hard
guardflag = MA
pausetime = 8,24
getpower = 71,71
sparkno = s7021
sparkxy = -10,-72
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.Type = low
ground.slidetime = 14
ground.hittime  = 17
ground.velocity = -0.5,-7
air.velocity = -0.5,-5.5
fall = 1
fall.recover = 0
;fall.recovertime = 50
ID = 450
P2StateNo = 13103

[State 200, 1];レイズ
Type = PlaySnd
Trigger1 = animelem = 1
value = 703, 0

[State 200, 1];レイズ
Type = PlaySnd
Trigger1 = animelem = 10
value = 450, 0

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 10
value = 500,0

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 10
value = 450,1

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 10
id = 3000
name = "ka-do"
sprpriority = 2
pos = -20,0
posType = p1
Stateno = 401
helperType = normal
keyctrl = 0 
ownpal = 1

[State 410, 4]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
;空中?弱?パンチ
[Statedef 600]
Type    = A
moveType= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 600
sprpriority = 2


[State 600, 2]
Type = HitDef
Trigger1 = animelem = 3
attr = A, NA
damage    = 45 
priority = 3, Hit
getpower = 81,61
guardflag = HA
pausetime = 7,8
sparkno = s7020
sparkxy = -10,-54
hitsound   = s510,0
guard.sparkno = s7010
guardsound = s120,0
ground.Type = low
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3
ID = 600
nochainID = 1100


[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 2
value = 500, 0

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 2
value = 200,0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 2
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 601
helperType = normal
keyctrl = 0 
ownpal = 1


;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 601]
Type = S
ctrl = 0
anim = 601
velset = 0,0
moveType = I
physics = S
sprpriority = 55
;---------------------[アニメーション]
[State a]
Type = changeanim
Trigger1 = time = 0
Trigger1 = Root,Stateno = 610
value = 611

[State a]
Type = changeanim
Trigger1 = time = 0
Trigger1 = Root,Stateno = 640
value = 641

[State 0, AngleDraw]
Type = AngleDraw
TriggerAll = Root,Stateno = 600
Trigger1 = 1
value = 9
scale = 1,0.5
ignorehitpause = 1
;persistent = 

;---------------------[ポジションの固定]
[State a]
Type = bindtoRoot
Trigger1 = 1
facing = 1
pos = 0,Cond(Root,StateNo != 600,0,-36)


;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = 1
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = 1
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H
Trigger3 = Root,StateType != A

;---------------------------------------------------------------------------
;空中?強?パンチ
[Statedef 610]
Type    = A
moveType= A
physics = A
juggle  = 8
poweradd= 50
ctrl = 0
anim = 610
sprpriority = 1

[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = PrevStateNo = 1510
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 


[State 610, 3]
Type = HitDef
Trigger1 = animelem = 4
attr = A, NA
damage = 89
priority = 5, Hit
guardflag = HA
getpower = 111,81
pausetime = 10,14
sparkno = s7021
sparkxy = -10,-44
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
animType = hard
ground.Type = low
ground.slidetime = 18
ground.hittime  = 24
ground.velocity = -4
air.velocity = -3,-4
ID = 600
P2StateNo = 13103
nochainID = 1100

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 4
value = 500, 1

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 3
value = 210,0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 601
helperType = normal
keyctrl = 0 
ownpal = 1

;---------------------------------------------------------------------------
;垂直空中?弱?キック
[Statedef 630]
Type    = A
moveType= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 630
sprpriority = 1

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 1
value = 200,0

[State 630, 1]
Type = PlaySnd
Trigger1 = animelem = 3
value = 330, 0


[State 630, 2]
Type = HitDef
Trigger1 = animelem = 4
attr = A, NA
damage = 54 
priority = 3, Hit
getpower = 81,61
guardflag = HA
pausetime = 8,8
sparkno = s7000
sparkxy = -5,-56
hitsound   = s430,0
guard.sparkno = s7010
guardsound = s120,0
ground.Type = low
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4
air.velocity = -2,-3
ID = 600
nochainID = 1100

;---------------------------------------------------------------------------
;空中?強?キック
[Statedef 640]
Type    = A
moveType= A
physics = A
juggle  = 8
poweradd= 50
ctrl = 0
anim = 640
sprpriority = 1

[State 640, 3]
Type = HitDef
Trigger1 = animelem = 4
attr = A, NA
damage    = 89
priority = 4, Hit
guardflag = HA
getpower = 111,81
pausetime = 12,12
sparkno = s7021
sparkxy = -10,-72
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
animType = hard
ground.Type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -3,-4
ID = 600
nochainID = 1100

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 4
value = 500, 1

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 3
value = 210,0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 601
helperType = normal
keyctrl = 0 
ownpal = 1

;---------------------------------------------------------------------------
;空中ふっ飛ばし攻撃
[Statedef 690]
Type    = A
moveType= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 690
sprpriority = 1

[State 200, 5]
Type = PlaySnd
Trigger1 = AnimElem = 1
value = 290,0

[State 640, 2]
Type = PlaySnd
Trigger1 = animelem = 2
value = 390, 0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0  
posType = p1
Stateno = 201
helperType = normal
keyctrl = 0 
ownpal = 1


[State 240, 2]
Type = HitDef
Trigger1 = Time = 0
attr = A, NA
animType  = hard
damage    = 85
getpower = 162,162
guardflag = MA 
pausetime = 11,12
sparkno = s7020
sparkxy = -15,-72  
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.Type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -6,-6.5
air.velocity = -6,-6.8
yaccel = 0.45
fall = 1
fall.recover = 0
ID = 1300
nochainID = 1200








;---------------------------------------------------------------------------
;緊急回避前
[Statedef 700]
Type = S      ;S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
moveType = I    ;Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
physics = N  ; S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 700
velset = 0,0
sprpriority = 2


[State 290, 1]
Type = poweradd
Triggerall = time = 0
Trigger1 = prevStateno = 150
Trigger2 = prevStateno = 151
value = -1000


[State 700, 2];無敵の状態を作る
Type = NotHitBy
Triggerall = 1
Trigger1 = prevStateno = 150
Trigger2 = prevStateno = 151
Trigger3 = Var(59)>=5 
value = SCA

[State a]
Type = posset
Trigger1 = time = 0
y = 0

[State 1];無敵の状態を作る
Type = NotHitBy
TriggerAll = Var(59)<5
Trigger1 = time = [0,22]
value = SCA


[State a]
Type = playerpush
Trigger1 = animelem = 10,<=0
value = 0

[State 600, 1];
Type = PlaySnd
Trigger1 = Time = 1
value = 701, 0

[State 600, 1]
Type = velset
Trigger1 = Time = 0
x = 0

[State 600, 1]
Type = velset
Trigger1 = animelem = 2
x = 7

[State 600, 1]
Type = velset
Trigger1 = animelem = 10
x = 0

[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 0
time = 33
trans = add1
timegap = 2
framegap = 2
length = 6
palbright = 12,12,12
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1






[State 200, 7]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;緊急回避後ろ
[Statedef 701]
Type = S      ;S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
moveType = I   ; Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
physics = N ; S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 701
sprpriority = 2
velset = 0,0

[State 1];無敵の状態を作る
Type = NotHitBy
TriggerAll = Var(59) >=5
Trigger1 = 1
value = SCA

[State 290, 1]
Type = poweradd
Triggerall = time = 0
Trigger1 = prevStateno = 150
Trigger2 = prevStateno = 151
value = -1000


[State 700, 2];無敵の状態を作る
Type = NotHitBy
Triggerall = 1
Trigger1 = prevStateno = 150
Trigger2 = prevStateno = 151
Trigger3 = Var(59)>=5 
value = SCA

[State a]
Type = posset
Trigger1 = time = 0
y = 0

[State 1];無敵の状態を作る
Type = NotHitBy
TriggerAll = Var(59)<5
Trigger1 = time = [0,24]
value = SCA

[State a]
Type = playerpush
Trigger1 = animelem = 11,<= 0
value = 0

[State 600, 1]
Type = PlaySnd
Trigger1 = Time = 1
value = 701, 0

[State 600, 1]
Type = velset
Trigger1 = Time = 0
x = 0

[State 600, 1]
Type = velset
Trigger1 = animelem = 3
x = -7

[State 600, 1]
Type = velset
Trigger1 = animelem = 11
x = 0


[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 0
time = 33
trans = add1
timegap = 2
framegap = 2
length = 6
palbright = 0,0,0
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1




[State 200, 7]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ダウン回避
[Statedef 702]
Type = S      ;S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
moveType = I    ;Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
physics = N  ; S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 702
sprpriority = 2
velset = 0,0


;---------------------[]

[State a]
Type = posset
Trigger1 = time = 0
y = 0

[State 1];無敵の状態を作る
Type = NotHitBy
Trigger1 = 1
value = SCA

[State a]
Type = playerpush
Trigger1 = animelem = 10,<=0
value = 0

[State 600, 1]
Type = PlaySnd
Trigger1 = Time = 1
value = 701, 0

[State 600, 1]
Type = velset
Trigger1 = Time = 0
x = -6

[State 600, 1]
Type = veladd
Trigger1 = vel x <= 0
Trigger1 = gametime % 2
x = 0.4

[State a]
Type = velset
Trigger1 = vel x >= 0
x = 0


[State 50, 4];←成功したときの残像
Type = null;AfterImage
Trigger1 = time = 0
time = 33
trans = add1
timegap = 2
framegap = 2
length = 6
palbright = 0,0,0
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1


[State 200, 7]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1




;---------------------------------------------------------------------------
;2
[Statedef 800]
Type    = S
moveType= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 1

;---------------------[ブーメランのエフェクト]
[State removeexplod];前のステートのブーメラン消去
Type = removeexplod
Trigger1 = time = 0
ID = 3000

[State 1];無敵の状態を作る
Type = NotHitBy
TriggerAll = Var(59) >=5
Trigger1 = 1
value = SCA


[State 800, 1]
Type = HitDef
Trigger1 = Time = 0
Trigger1 = p2Stateno != 150 && 151 && 152 && 153 && 130 && 131 && 140
attr = , NT          ;ｓ：立ち　ｎ：通常　ｔ：投げ
hitflag = M-          ;コンボの途中から投げが入らないよう設定してある
priority = 1, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = -1          ;-をつければスパークエフェクトは無い
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
p1facing = Cond (command = "holdback", -1, 1) ;前を押したらターンする設定
p2facing = 1          ;？
p1Stateno = 801       ;投げが成功した場合の移動する１Ｐのステート
p2Stateno = 805       ;投げが成功した場合の移動する２Ｐのステート
;hitsound = S800,0
fall = 1              ;落ちる力を２Ｐにかけるか

[State 800, 2]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;自分
[Statedef 801]
Type    = S
moveType= A
physics = N
anim = 801
juggle  = 8
sprpriority = 1

;---------------------[]
[State explod];掴み
Type = Explod
Trigger1 = animelem = 3
anim = 7080
id = 3000
sprpriority = 2
posType = p1
pos = 32,-86
bindtime = -1
supermove = 0
ignorehitpause = 0
under = 0

[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
;ignorehitpause = 
;persistent = 

[State explod];斬り
Type = Explod
Trigger1 = animelem = 5
anim = 7021
id = 3000
sprpriority = 4
posType = p1
pos = 41,-80
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0


;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 5
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 201
helperType = normal
keyctrl = 0 
ownpal = 1

;---------------------[サウンド]
[State 810, Grab Sound];掴み
Type = PlaySnd
Trigger1 = animelem = 3
value = 800, 0

[State 810, Grab Sound];スペキュレーション
Type = PlaySnd
Trigger1 = AnimElem = 5
value = 801, 0

[State 810, Grab Sound];斬る
Type = PlaySnd
Trigger1 = AnimElem = 5
value = 510, 1

[State 810, Grab Sound];斬る
Type = PlaySnd
Trigger1 = AnimElem = 5
value = 1000, 2

;:::相手

[State 801, 2]
Type = TargetBind
Trigger1 = animelem = 1
pos = 36,0

[State 801, 2]
Type = TargetBind
Trigger1 = animelem = 5
pos = 46,0

[State 801, 2]
Type = Targetlifeadd
Trigger1 = animelem = 5
value = -100;-173
kill = 1


;:::

[State 210, Width];画面端の押し戻し判定
Type = Width
Trigger1 = 1;animelem = 1
edge = 75,0

[State a] 
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げられている相手
[Statedef 805]
Type    = A
moveType= H
physics = N
velset = 0,0
sprpriority = 1

[State 700, 2];無敵の状態を作る
Type = NotHitBy
Trigger1 = 1
value = SCA

[State 820, 1]
Type = ChangeAnim2
Trigger1 = Time = 0
value = 805

[State 1];カメラ固定
Type = screenbound
Trigger1 = 1
value = 1
movecamera = 1


[State 821, 3] 
Type = ChangeState
;Triggerall = Vel Y > 0
;Trigger1 = Pos Y >= 0
Trigger1 = animtime = 0
value = 1410 

;                          Special Moves      
;---------------------------------------------------------------------------;        
;MAX??                      ;
;本体BC状?号
; クイックMAX
[Statedef 950]
Type     = S
moveType = I
physics  = S
anim     = 950
ctrl     = 0
velset   = 0,0
sprpriority = 1

[State -2, MAX??]
Type = Helper
TriggerAll = RoundState = 2
Trigger1 = numhelper(16002) = 0
Trigger1 = Time = 1
id = 16002
name = "MAX"
sprpriority = 1
pos = 0,0
posType = p1
Stateno = 16002
helperType = normal
pausemovetime = 99999999
supermovetime = 99999999
keyctrl = 0 
ownpal = 1

[State 751, PowerAdd]
Type = PowerAdd
Trigger1 = time = 0
value = -1000 

[State 751, VarSet]
Type = VarSet
Trigger1 = time = 0
var(41) = 1000

[State 2000]
Type = Explod
Trigger1 = AnimElem = 1
anim = 951
pos = 0,0
posType = p1 
scale = 1.2,1.2 
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1


[State 751, 音を鳴らす]
Type = PlaySnd
Trigger1 = AnimElem = 1
value = s751,0

[State 0, CtrlSet]
Type = CtrlSet
TriggerAll = Time>1 ;
Trigger1 = PrevStateNo = [200,460]
value = 1
;ignorehitpause = 
;persistent = 

[State 750, EnvShake]
Type = EnvShake
Trigger1 = time = 0
time = 10
ampl = -5
freq = 95
phase = 95


[State 0, Null]
Type = Null
TriggerAll = Time<=1
Trigger1 = PrevStateNo = [200,449]
Trigger1 = 1 || FVar(33):=1
Trigger2 = PrevStateNo = 251
Trigger2 = 1 || FVar(33):=2
ignorehitpause = 1
;persistent = 


[State 751, ChangeState]
Type = ChangeState
TriggerAll = Fvar(33) = 1 
TriggerAll = Time>1
TriggerAll = var(59)
Trigger1 = Abs(EnemyNear(Floor(fvar(37))),Pos x-Pos x)<=100||Var(52)<101
Trigger1 = EnemyNear(Floor(fvar(37))),StateType != A
value = Cond(Random<=666,34,Cond(Random%2&&Var(42)=1&&P2bodydist x<=85,235,100))
 

[State 751, ChangeState]
Type = ChangeState
TriggerAll = Fvar(33) !=2
TriggerAll = Time>1
TriggerAll = var(59) 
Trigger1 = Abs(EnemyNear(Floor(fvar(37))),Pos x-Pos x)>100
Trigger2 = EnemyNear(Floor(fvar(37))),StateType != A
value = 100




[State 751, ChangeState]
Type = ChangeState
TriggerAll = Fvar(33) = 2 
TriggerAll = AnimTime = 0
TriggerAll = PrevStateNo =251
TriggerAll = Time>1
Trigger1 = var(59)>4
Trigger1 = Abs(EnemyNear(Floor(fvar(37))),Pos x-Pos x)<125
value = 451


[State 750, ChangeState]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;必殺技
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; ダイア
[Statedef 1000]
Type    = S
moveType= A
physics = N
juggle  = 7
poweradd= 101
velset = 0,0
anim = 1000
sprpriority = 1
ctrl = 0
facep2 = 1



;---------------------[コマンド判定]

[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1

[State 1000, MAX?乕僕]
Type = varadd
Triggerall = var(41) > 0
Triggerall = time = 0
Trigger1 = (prevStateno = [200,1999])
v = 41
value = -90
ignorehitpause = 1

[State a]
Type = varset
TriggerAll=var(59)=0
Trigger1 = time = 0
Trigger1 = command = "x"
v = 5
value = 0

[State a]
Type = varset
TriggerAll=var(59)=0
Trigger1 = time = 0
Trigger1 = command = "y"
v = 5
value = 1


[State a]
Type = varset
TriggerAll=var(59)> 0
Trigger1 = time = 0
v = 5
value = 0
;---------------------[アニメーション変更]
[State a]
Type = changeanim
Trigger1 = time = 0
Trigger1 = var(5) = 1
value = 1001

;---------------------[効果音]
[State 210, 1];ハハハハハ
Type = PlaySnd
Trigger1 = animelem = 4
value = 1000, 0

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 4
value = 1000, 1

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 4
value = 1000, 2

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1005
helperType = normal
keyctrl = 0 
ownpal = 1

[State 1100, Velocity]
Type = Veladd
Trigger1 = animelemtime(3) = 8
Trigger1 = anim = 1001
x = 25


[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
time = 15
trans = add
timegap = 1
framegap = 2
length = 15
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9

[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
Trigger1 = anim = 1001
time = 30
trans = add
timegap = 1
framegap = 1
length = 15
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9

;---------------------[攻撃判定]
[State 210, 2]
Type = HitDef
Trigger1 = animelemtime(4) = 0
Trigger1 = anim = 1000
attr = S, SA
animType  = hard
damage    = 71,10
priority = 4, Hit
getpower = 61,61
guardflag = MA
hitflag = MAF
pausetime = 2,5
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10.5
air.velocity = -4.5,-5.5
air.fall = 1
fall.recover = 0
ID = 200
envshake.time = 15
envshake.ampl = 4
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

[State 210, 2]
Type = HitDef
Trigger1 = animelemtime(4) = 2
Trigger1 = anim = 1001
attr = S, SA
animType  = hard
damage    = 91,10
priority = 4, Hit
getpower = 81,81
guardflag = MA
hitflag = MAF
pausetime = 3,3
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3,-5.5
air.velocity = -3,-5.5
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
ID = 200
envshake.time = 15
envshake.ampl = 5
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

;---------------------[立ちステートに戻る]
[State a]
Type = changeState
Trigger1 = animelem = 5,>=0
Trigger1 = anim = 1000
value = 1050

[State a]
Type = changeState
Trigger1 = animelem = 5,>=0
Trigger1 = anim = 1001
value = 1051

[State a]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

; ダイア
[Statedef 1001]
Type    = S
moveType= A
physics = N
juggle  = 7
poweradd= 101
velset = 0,0
anim = 1001
sprpriority = 1
ctrl = 0
facep2 = 1


[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1

[State 1000, MAX?乕僕]
Type = varadd
Triggerall = var(41) > 0
Triggerall = time = 0
Trigger1 = (prevStateno = [200,1999])
v = 41
value = -90
ignorehitpause = 1

;---------------------[アニメーション変更]
[State a]
Type = changeanim
Trigger1 = time = 0
value = 1001

;---------------------[効果音]
[State 210, 1];ハハハハハ
Type = PlaySnd
Trigger1 = animelem = 4
value = 1000, 0

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 4
value = 1000, 1

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 4
value = 1000, 2

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1005
helperType = normal
keyctrl = 0 
ownpal = 1

[State 1100, Velocity]
Type = Veladd
Trigger1 = animelemtime(3) = 8
Trigger1 = anim = 1001
x = 25


[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
Trigger1 = anim = 1001
time = 30
trans = add
timegap = 1
framegap = 1
length = 15
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9

[State 210, 2]
Type = HitDef
Trigger1 = animelemtime(4) = 2
Trigger1 = anim = 1001
attr = S, SA
animType  = hard
damage    = 91,10
priority = 4, Hit
getpower = 81,81
guardflag = MA
hitflag = MAF
pausetime = 3,13
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = low
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -3,-5.5
air.velocity = -3,-5.5
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
ID = 200
envshake.time = 15
envshake.ampl = 5
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

;---------------------[立ちステートに戻る]
[State a]
Type = changeState
Trigger1 = animelem = 5,>=0
value = 1051


[State a]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ダイア?追加
[Statedef 1050]
Type    = S
moveType= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1050
sprpriority = 1
ctrl = 0



;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 3
value = 1000, 1

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 3
value = 1000, 2

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 3
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1005
helperType = normal
keyctrl = 0 
ownpal = 1


;---------------------[攻撃判定]
[State 210, 2]
Type = HitDef
Trigger1 = animelem = 3
attr = S, SA
animType  = hard
damage    = 44,10
priority = 5, Hit
getpower = 51,51
guardflag = MA
hitflag = MAF
pausetime = 14,25
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = low
ground.slidetime = 20
ground.hittime  = 17
ground.velocity = -8,-4
guard.velocity = -16
air.velocity = -8,-4
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
ID = 200
envshake.time = 15
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
Type = EnvColor
Trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに戻る]
[State a]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

; ダイア?追加
[Statedef 1051]
Type    = S
moveType= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1051
sprpriority = 1
ctrl = 0

;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 3
value = 1000, 1

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 3
value = 1000, 2

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 3
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1305
helperType = normal
keyctrl = 0 
ownpal = 1


;---------------------[攻撃判定]
[State 210, 2]
Type = HitDef
Trigger1 = animelem = 3
attr = S, SA
animType  = hard
damage    = 44,10
priority = 5, Hit
getpower = 71,71
guardflag = MA
hitflag = MAF
pausetime = 14,24
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = low
ground.slidetime = 20
ground.hittime  = 17
ground.velocity = -8,-4
air.velocity = -8,-4
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
ID = 200
envshake.time = 15
envshake.ampl = 15
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
Type = EnvColor
Trigger1 = movehit
value = 255,255,255
time = 3
under = 1
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに戻る]
[State a]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1005]
Type = S
ctrl = 0
anim = 1005
velset = 0,0
moveType = A
physics = S
sprpriority = 2

;---------------------[アニメーション変更]
[State a]
Type = changeanim
TriggerAll= time = 0
Trigger1 = Root,Stateno = 1050
Trigger2 = Root,Stateno = 4001 && root,animelem = 55
Trigger3 = Root,Stateno = 2602 && Root,Animelem = 11,>=0&&Root,Animelem = 14,<=0
value = 1055


;---------------------[効果音]
[State 210, 1];パラパラ
Type = PlaySnd
Trigger1 = animelem = 2
value = 195, 2



;---------------------[ポジションの固定]
[State a]
Type = bindtoRoot
Trigger1 = 1
facing = 1
pos = 0,0


;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H


;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1006]
Type = S
ctrl = 0
anim = 1005
velset = 0,0
moveType = A
physics = S
sprpriority = 2



;---------------------[効果音]
[State 210, 1];パラパラ
Type = PlaySnd
Trigger1 = animelem = 2
value = 195, 2

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = 1
value = 1
scale = 1.2,1.2
ignorehitpause = 1
;persistent = 


[State a]
Type = bindtoRoot
Trigger1 = 1
facing = 1
pos = 20,8

;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H



;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1007]
Type = S
ctrl = 0
anim = 1705
velset = 0,0
moveType = A
physics = S
sprpriority = 2


;---------------------[効果音]
[State 210, 1];パラパラ
Type = PlaySnd
Trigger1 = animelem = 2
value = 195, 2




;---------------------[ポジションの固定]
[State a]
Type = bindtoRoot
Trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; クラブ
[Statedef 1100]
Type    = S
moveType= A
physics = N
juggle  = 2
poweradd= 101
velset = 0,0
anim = 1100
sprpriority = 1
ctrl = 0

[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1


[State 1000, MAX?乕僕]
Type = varadd
Triggerall = var(41) > 0
Triggerall = time = 0
Trigger1 = (prevStateno = [200,1999])
v = 41
value = -90
ignorehitpause = 1

[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
time = 45
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9
ignorehitpause = 1

[State a]
Type = varset
TriggerAll=var(59)=0
Trigger1 = time = 0
Trigger1 = command = "a"
v = 5
value = 0

[State a]
Type = varset
TriggerAll=var(59)=0
Trigger1 = time = 0
Trigger1 = command = "b"
v = 5
value = 1

[State a]
Type = varset
TriggerAll=var(59)> 0
Trigger1 = time = 0
v = 5
value = 1

;---------------------[アニメーション変更]
[State a]
Type = changeanim
Trigger1 = time = 0
Trigger1 = var(5) = 1
value = 1101



;---------------------[効果音]
[State a];くははは
Type = playsnd
Trigger1 = animelem = 1
value = 1100,0

[State a];ジャンプ
Type = playsnd
Trigger1 = animelem = 3
value = 40,1


[State a];斬る
Type = playsnd
Trigger1 = animelem = 7
value = 1100,1

[State a];斬る
Type = playsnd
Trigger1 = animelem = 7
value = 1000,2

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 7
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1105
helperType = normal
keyctrl = 0 
ownpal = 1

;---------------------[移動、ステートの状態変更]
[State a]
Type = StateTypeset
Trigger1 = animelem = 4
value = A



[State a]
Type = velset
Trigger1 = animelem = 4
Trigger1 = var(5) = 0
x = 3
y = -4.5

[State a]
Type = velset
Trigger1 = animelem = 4
Trigger1 = var(5) = 1
x = 6
y = -10.8

[State a]
Type = veladd
Trigger1 = animelem = 4,>=0
Trigger1 = var(5) = 0
y = 0.5

[State a]
Type = veladd
Trigger1 = animelem = 4,>=0
Trigger1 = var(5) = 1
y = 0.85


[State 2];弱(派生版)
Type = HitDef
Triggerall = var(5) = 0
Trigger1 = animelem = 7
attr = A, SA
animType  = hard
priority = 5, Hit
damage    = 80,10
getpower = 81,81
hitflag = HAF
guardflag = HA
pausetime = 10,10
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.Type = high
ground.slidetime = 17
ground.slidetime = 22
ground.hittime  = 17
ground.velocity = -4,14
groundguard.velocity = -19
airguard.velocity = -6,6
air.velocity = -4,14
fall =1
air.fall = 1
fall.recover = 0
fall.envshake.time = 13
fall.envshake.ampl = -5
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 10
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
Type = EnvColor
Trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0




[State 2];強(派生版)
Type = HitDef
Triggerall = var(5) = 1
Trigger1 = animelem = 7
attr = A, SA
animType  = hard
priority = 5, Hit
damage    = 89,10
getpower = 111,111
guardflag = HA
hitflag = HAF
pausetime = 18,18
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.Type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = 0,14
air.velocity = 0,14
fall =1
air.fall = 1
fall.recover = 0
fall.envshake.time = 13
fall.envshake.ampl = -5
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 18
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103


;---------------------[立ちステートに戻る]
[State a]
Type = changeState
Trigger1 = vel y >0 && pos y >=0
value = 1102

[Statedef 1101]
Type    = A
moveType= A
physics = N
juggle  = 2
poweradd= 101
velset = 0,0
anim = 11000
sprpriority = 1
ctrl = 0

[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
time = 45
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9
ignorehitpause = 1

[State a]
Type = varset
TriggerAll=var(59)=0
Trigger1 = time = 0
Trigger1 = command = "a"
v = 5
value = 0

[State a]
Type = varset
TriggerAll=var(59)=0
Trigger1 = time = 0
Trigger1 = command = "b"
v = 5
value = 1

;---------------------[アニメーション変更]
[State a]
Type = changeanim
Trigger1 = time = 0
Trigger1 = var(5) = 1
value = 11001



;---------------------[効果音]
[State a];くははは
Type = playsnd
Trigger1 = animelem = 1
value = 1100,0

[State a];ジャンプ
Type = playsnd
Trigger1 = animelem = 1
value = 40,1


[State a];斬る
Type = playsnd
Trigger1 = animelem = 5
value = 1100,1

[State a];斬る
Type = playsnd
Trigger1 = animelem = 5
value = 1000,2

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 5
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1105
helperType = normal
keyctrl = 0 
ownpal = 1

;---------------------[移動、ステートの状態変更]
[State a]
Type = gravity
Trigger1 = 1

[State a]
Type = veladd
Trigger1 = animelem = 1
Trigger1 = var(5) = 0
x = 2
y = -3

[State a]
Type = veladd
Trigger1 = animelem = 1
Trigger1 = var(5) = 1
x = 4
y = -6


[State 2];弱(派生版)
Type = HitDef
Triggerall = var(5) = 0
Trigger1 = animelem = 5
attr = A, SA
animType  = hard
priority = 5, Hit
damage    = 80,10
getpower = 81,81
guardflag = HA
hitflag = HAF
pausetime = 10,10
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.Type = high
ground.slidetime = 17
ground.slidetime = 22
ground.hittime  = 17
ground.velocity = -4,14
groundguard.velocity = -19
airguard.velocity = -6,6
air.velocity = -4,14
fall =1
air.fall = 1
fall.recover = 0
fall.envshake.time = 13
fall.envshake.ampl = -5
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 10
envshake.ampl = 10
envshake.freq = 80
P2StateNo = 13103
envshake.phase = 80

[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
Type = EnvColor
Trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0




[State 2];強(派生版)
Type = HitDef
Triggerall = var(5) = 1
Trigger1 = animelem = 5
attr = A, SA
animType  = hard
priority = 5, Hit
damage    = 89,10
getpower = 111,111
guardflag = HA
hitflag = HAF
pausetime = 18,18
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.Type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = 0,14
air.velocity = 0,14
fall =1
air.fall = 1
fall.recover = 0
fall.envshake.time = 13
fall.envshake.ampl = -5
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 18
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

;---------------------[立ちステートに戻る]
[State a]
Type = changeState
Trigger1 = vel y >0 && pos y >=0
value = 1102

;---------------------------------------------------------------------------
; クラブ?着地
[Statedef 1102]
Type    = S
moveType= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1102
ctrl = 0

[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 0
time = 0

;---------------------[]
[State a]
Type = posset
Trigger1 = time = 0
y = 0

;---------------------[効果音]
[State a];
Type = playsnd
Trigger1 = time = 0
value = 40,0


[State 00]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1


[Statedef 1103]
Type    = S
moveType= A
physics = N
juggle  = 2
poweradd= 101
velset = 0,0
anim = 1101
sprpriority = 1
ctrl = 0

[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
time = 45
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9
ignorehitpause = 1

;---------------------[アニメーション変更]
[State a]
Type = changeanim
Trigger1 = time = 0
value = 1101



;---------------------[効果音]
[State a];くははは
Type = playsnd
Trigger1 = animelem = 1
value = 1100,0

[State a];ジャンプ
Type = playsnd
Trigger1 = animelem = 3
value = 40,1


[State a];斬る
Type = playsnd
Trigger1 = animelem = 7
value = 1100,1

[State a];斬る
Type = playsnd
Trigger1 = animelem = 7
value = 1000,2

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 7
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1105
helperType = normal
keyctrl = 0 
ownpal = 1

;---------------------[移動、ステートの状態変更]
[State a]
Type = StateTypeset
Trigger1 = animelem = 4
value = A


[State a]
Type = velset
Trigger1 = animelem = 4
x = 6
y = -10.8

[State a]
Type = veladd
Trigger1 = animelem = 4,>=0
y = 0.85




[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
Type = EnvColor
Trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0




[State 2];強(派生版)
Type = HitDef
Trigger1 = animelem = 7
attr = A, SA
animType  = hard
priority = 5, Hit
damage    = 89,10
getpower = 111,111
guardflag = HA
hitflag = HAF
pausetime = 18,18
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.Type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = 0,14
air.velocity = 0,14
fall =1
air.fall = 1
fall.recover = 0
fall.envshake.time = 13
fall.envshake.ampl = -5
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 18
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

;---------------------[立ちステートに戻る]
[State a]
Type = changeState
Trigger1 = vel y >0 && pos y >=0
value = 1102

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1105]
Type = S
ctrl = 0
anim = 1105
velset = 0,0
moveType = A
physics = S
sprpriority = 2

;---------------------[効果音]
[State 210, 1];パラパラ
Type = PlaySnd
Trigger1 = animelem = 2
value = 195, 2

;---------------------[ポジションの固定]
[State a]
Type = bindtoRoot
Trigger1 = time = 0
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; ハート
[Statedef 1200]
Type    = S
moveType= A
physics = S
juggle  = 0
poweradd= 101
velset = 0,0
anim = 1200
sprpriority = 1
ctrl = 0



[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1

[State 1000, MAX?乕僕]
Type = varadd
Triggerall = var(41) > 0
Triggerall = time = 0
Trigger1 = (prevStateno = [200,1999])
v = 41
value = -90
ignorehitpause = 1
;---------------------[コマンド判定]

[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1

[State a]
Type = varset
TriggerAll= var(59)
Trigger1 = time = 0
v = 5
value = 0




[State a]
Type = varset
TriggerAll=var(59)=0
Trigger1 = time = 0
Trigger1 = command = "a"
v = 5
value = 0

[State a]
Type = varset
TriggerAll=var(59)=0
Trigger1 = time = 0
Trigger1 = command = "b"
v = 5
value = 1



;---------------------[アニメーション変更]

[State a]
Type = changeanim
Trigger1 = time = 0
Trigger1 = var(5) = 0
value = 1200

[State a]
Type = changeanim
Trigger1 = time = 0
Trigger1 = var(5) = 1
value = 1201
;---------------------[速度]
[State a]
Type = veladd
Trigger1 = animelem = 7
x = -6




;---------------------[効果音]
[State a];ふっふ
Type = playsnd
Trigger1 = animelem = 5
value = 1200,0


[State a];斬る
Type = playsnd
Trigger1 = animelem = 7
value = 1200,1

[State a];斬る
Type = playsnd
Trigger1 = animelem = 7
value = 1000,2

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 7
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1205
helperType = normal
keyctrl = 0 
ownpal = 1

[State a];
Type = Helper
Trigger1 = animelem = 7
id = 1200
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1206
helperType = normal
keyctrl = 0 
ownpal = 1

[State 1];無敵の状態を作る
Type = NotHitBy 
Trigger1 = animelem = 8,<=0
Trigger1 = anim = 1200
value = SCA

[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
time = 45
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9
ignorehitpause = 1

;---------------------[攻撃]

[State 2];強
Type = HitDef
Trigger1 = animelem = 5
Trigger1 = anim = 1200
attr = S, SA
animType  = hard
priority = 5, Hit
damage    = 74,10
getpower = 51,51
guardflag = MA
hitflag = MAF
pausetime = 15,16
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.Type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -4,-8
air.velocity = -4,-8
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 15
envshake.ampl = 15
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

[State 210, 2]
Type = HitDef
Trigger1 = animelem = 1
Trigger1 = anim = 1201
attr = S, SA
animType  = diagup
damage    = 95,10
priority = 5, Hit
getpower = 81,81
guardflag = MA
hitflag = MAF
pausetime = 20,20
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.Type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -1.5,-8
air.velocity = -1.5,-8
yaccel = 0.49
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 15
envshake.ampl = 15
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
Type = EnvColor
Trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0

[State a]
Type = changeState
Trigger1 = animtime = 0
value = 1202

[Statedef 1201]
Type    = S
moveType= A
physics = S
juggle  = 0
poweradd= 101
velset = 0,0
anim = 1201
sprpriority = 1
ctrl = 0



[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1

[State 1000, MAX?乕僕]
Type = varadd
Triggerall = var(41) > 0
Triggerall = time = 0
Trigger1 = (prevStateno = [200,1999])
v = 41
value = -90
ignorehitpause = 1

;---------------------[アニメーション変更]
[State a]
Type = changeanim
Trigger1 = time = 0
value = 1201
;---------------------[速度]
[State a]
Type = veladd
Trigger1 = animelem = 7
x = -6


;---------------------[効果音]
[State a];ふっふ
Type = playsnd
Trigger1 = animelem = 5
value = 1200,0


[State a];斬る
Type = playsnd
Trigger1 = animelem = 7
value = 1200,1

[State a];斬る
Type = playsnd
Trigger1 = animelem = 7
value = 1000,2

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 7
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1205
helperType = normal
keyctrl = 0 
ownpal = 1

[State a];
Type = null;Helper
Trigger1 = animelem = 7
id = 1200
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1206
helperType = normal
keyctrl = 0 
ownpal = 1

[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
time = 45
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9
ignorehitpause = 1

;---------------------[攻撃]


[State 210, 2]
Type = HitDef
Trigger1 = animelem = 1
Trigger1 = anim = 1201
attr = S, SA
animType  = diagup
damage    = 95,10
priority = 5, Hit
getpower = 81,81
guardflag = MA
hitflag = MAF
pausetime = 20,30
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.Type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -1.5,-8
air.velocity = -1.5,-8
yaccel = 0.49
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 15
envshake.ampl = 15
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
Type = EnvColor
Trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0

[State a]
Type = changeState
Trigger1 = animtime = 0
value = 1202

;---------------------------------------------------------------------------
; ハート?終了
[Statedef 1202]
Type    = S
moveType= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1202
ctrl = 0


[State 0, NotHitBy]
type = NotHitBy
trigger1 = PrevStateno !=[1200,1201]
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 


[State 00]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(ENEMY)吹き飛び
[Statedef 1250]
Type    = A
moveType= H
physics = N
velset = 0,0
sprpriority = 1

[State a]
Type = velset
Trigger1 = animelem = 2
x = -16

[State 820, 1]
Type = ChangeAnim2
Trigger1 = Time = 0
value = 1250

[State 1];カメラ固定
Type = screenbound
Trigger1 = 1
value = 1
movecamera = 0,1

[State a]
Type = changeState
Triggerall = animelem = 2,>=0
Trigger1 = backEdgebodydist <=10
Trigger2 = time >=100
value = 1251

;---------------------------------------------------------------------------
;壁ぶつかり
[Statedef 1251]
Type    = A
moveType= H
physics = N
velset = 0,0
sprpriority = 1

[State 1020, 4]
Type = EnvShake
Trigger1 = time = 0
time = 5
ampl = -8
freq = 95
phase = 95

[State 1027, 音を鳴らす]
Type = PlaySnd
Trigger1 = Time = 0
value = F7,2

[State 820, 1]
Type = ChangeAnim2
Trigger1 = Time = 0
value = 1251

[State 1];カメラ固定
Type = screenbound
Trigger1 = 1
value = 1
movecamera = 0,1

[State a]
Type = changeState
Trigger1 = animtime = 0
value = 1252

;---------------------------------------------------------------------------
;跳ね返り
[Statedef 1252]
Type    = A
moveType= H
physics = N
velset = 5,-8
sprpriority = 3

[State a]
Type = null;turn
Trigger1 = time = 0

[State 820, 1]
Type = ChangeAnim2
Trigger1 = Time = 0
value = 1252

[State 1];カメラ固定
Type = screenbound
Trigger1 = 1
value = 1
movecamera = 0,1

[State 821, 1] ;これは重力これは毎フレーム事に0.4の力が加わります
Type = VelAdd
Trigger1 = 1
y = .28

[State 821, 3] 
Type = SelfState
Triggerall = Vel Y > 0
Trigger1 = Pos Y >= 0
value = 5100 




;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1205]
Type = S
ctrl = 0
anim = 1205
velset = 0,0
moveType = A
physics = S
sprpriority = 2

;---------------------[効果音]
[State 210, 1];パラパラ
Type = PlaySnd
Trigger1 = animelem = 2
value = 195, 2

;---------------------[ポジションの固定]
[State a]
Type = bindtoRoot
Trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H

;---------------------------------------------------------------------------
; (HELPER)飛び道具消去
[Statedef 1206]
Type    = S
moveType= A
physics = S
poweradd= 0
velset = 0,0
anim = 1206
ctrl = 0

[State a]
Type = bindtoRoot
Trigger1 = time = 0
time = -1
pos = 0,0

[State a]
Type = nothitby
Trigger1 = 1
value = SCA
time = -1

[State a]
Type = hitby
Trigger1 = 1
value = SCA,NP,SP
time = -1

[State a]
Type = hitoverride
Trigger1 = 1
attr = SCA,NP,SP
Stateno = 1207

[State a]
Type = destroyself
Trigger1 = Root,Stateno != 1200

;---------------------------------------------------------------------------
; (HELPER)飛び道具消去2
[Statedef 1207]
Type    = S
moveType= A
physics = S
poweradd= 0
velset = 0,0
anim = 1206
ctrl = 0

[State a]
Type = destroyself
Trigger1 = time = 0


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; スペード
[Statedef 1300]
Type    = S
moveType= A
physics = N
juggle  = 7
poweradd= 101
velset = 0,0
anim = 1300
sprpriority = 1
ctrl = 0

[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1


[State 1000, MAX?乕僕]
Type = varadd
Triggerall = var(41) > 0
Triggerall = time = 0
Trigger1 = (prevStateno = [200,1999])
v = 41
value = -90
ignorehitpause = 1

[State 4000, BGPalFX]
Type = PalFX
Trigger1 = time%2 = 1
time = 1
add = -255,-255,-255
ignorehitpause = 1


[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
time = 15
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9


;---------------------[効果音]
[State 210, 1];ふっふっふ
Type = PlaySnd
Trigger1 = animelem = 2
value = 1300, 0

[State 200, 1];ダッシュ
Type = PlaySnd
Trigger1 = animelem = 3
value = 703, 0

;---------------------[速度]
[State a]
Type = null;posadd
Trigger1 = animelem = 3
Trigger1 = var(5) = 0
x = 8

[State a]
Type = veladd
Trigger1 = 1
x = 0.9


;---------------------[立ちステートに戻る]
[State a]
Type = changeState
Triggerall = time >= 5
Trigger1 = p2bodydist x <= 20 && animelem = 4,>=0
Trigger2 = p2bodydist x <= 30 && animelem = 4,>=0
Trigger3 = time >= 32
value = 1302


;---------------------------------------------------------------------------
; スペード?攻撃
[Statedef 1302]
Type    = S
moveType= A
physics = S
juggle  = 8
poweradd= 0
velset = 26,0
anim = 1302
sprpriority = 1
ctrl = 0

[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
time = 15
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9

[State a]
Type = playerpush
Trigger1 = animelemtime(4) <= 0
value = 0


;---------------------[アニメーション変更]
[State a]
Type = changeanim
Trigger1 = time = 0
Trigger1 = var(5) = 1
value = 1303

;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 2
value = 1000, 1

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 2
value = 1000, 2


;---------------------[速度]
[State a]
Type = veladd
Trigger1 = vel x >= 0.2
Trigger1 = var(5) = 0
x = -0.1

[State a]
Type = veladd
Trigger1 = vel x >= 0.2
Trigger1 = var(5) = 1
x = -0.07

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 2
id = 3000
name = "ka-do"
sprpriority = 2
pos = 30,0
posType = p1
Stateno = 1305
helperType = normal
keyctrl = 0 
ownpal = 1



[State 210, 2]
Type = HitDef
Trigger1 = animelem = 1
attr = S, SA
animType  = hard
damage    = 71,10
priority = 5, Hit
getpower = 81,81
guardflag = MA
hitflag = MAF
pausetime = 0,35
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = 8,-6
air.velocity = 8,-6
yaccel = 0.42
fall = 1
fall.recover = 0
ID = 200
p2facing = -1
envshake.time = 15
envshake.ampl = 5
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
Type = EnvColor
Trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0

[State a]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; スペード?追加
[Statedef 1350]
Type    = S
moveType= A
physics = S
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1350
sprpriority = 1
ctrl = 0
facep2 = 0


[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1

[State 1000, MAX?乕僕]
Type = varadd
Triggerall = var(41) > 0
Triggerall = time = 0
Trigger1 = (prevStateno = [200,1999])
v = 41
value = -90
ignorehitpause = 1

;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 3
value = 801, 0

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 4
value = 1000, 2

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 4
value = 703, 0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelemtime(5) = 1
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,-30
posType = p1
Stateno = 1355
helperType = normal
keyctrl = 0 
ownpal = 1

[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
time = 35
trans = add
timegap = 1
framegap = 1
length = 15
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9

[State a]
Type = playerpush
Trigger1 = animelemtime(7) <= 0
value = 0

;---------------------[速度]
[State a]
Type = veladd
Trigger1 = animelem = 5
x = -120

[State a]
Type = velset
Trigger1 = animelem = 6
x = -2

[State 210, 2]
Type = HitDef
Trigger1 = animelem = 1
attr = S, SA
animType  = diagup
damage    = 71,10
priority = 5, Hit
getpower = 111,111
guardflag = MA
hitflag = MAF
pausetime = 0,35
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8,-6
air.velocity = -8,-6
yaccel = 0.42
fall = 1
fall.recover = 0
envshake.time = 25
envshake.ampl = 15
envshake.freq = 80
envshake.phase = 80
p2facing = 1
P2StateNo = 13103

[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S2100,2
ignorehitpause = 1
persistent = 0
freqmul = 1.1

[State -2, EnvColor]
Type = EnvColor
Trigger1 = movehit
value = 255,255,255
time = 3
under = 1
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに戻る]
[State a]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1305]
Type = S
ctrl = 0
anim = 1305
velset = 0,0
moveType = A
physics = S
sprpriority = 2

[State a]
Type = changeanim
Triggerall = time = 0
Trigger1 = Root,Stateno = 1350
Trigger2 = Root,Stateno = 1051
Trigger3 = Root,Stateno = 1700
value = 1355

;---------------------[効果音]
[State 210, 1];パラパラ
Type = PlaySnd
Trigger1 = animelem = 2
value = 195, 2

;---------------------[ポジションの固定]
[State a]
Type = bindtoRoot
Trigger1 = time = 0
facing = 1
pos = 0,0

[State a]
Type = bindtoRoot
Trigger1 = root,stateno = 4001
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H

;(HELPER)カード
[Statedef 1355]
Type = S
ctrl = 0
anim = 1005
velset = 0,0
moveType = A
physics = S
sprpriority = 2

;---------------------[アニメーション変更]
[State a]
Type = changeanim
TriggerAll = time = 0
Trigger1 = Root,Stateno = 1051
value = 1055

[State a]
Type = changeanim
TriggerAll = time = 0
Trigger1 = Root,Stateno = 2603
value = 1355

;---------------------[効果音]
[State 210, 1];パラパラ
Type = PlaySnd
Trigger1 = animelem = 2
value = 195, 2


[State 0, AngleDraw]
type = AngleDraw
trigger1 = Root,Stateno = 2603
value = -13
;scale = 
ignorehitpause = 1
;persistent = 


;---------------------[ポジションの固定]
[State a]
Type = null;bindtoRoot
Trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H

;(HELPER)カード
[Statedef 1355]
Type = S
ctrl = 0
anim = 1005
velset = 0,0
moveType = A
physics = S
sprpriority = 2

;---------------------[アニメーション変更]
[State a]
Type = changeanim
TriggerAll = time = 0
Trigger1 = Root,Stateno = 1051
value = 1055

[State a]
Type = changeanim
TriggerAll = time = 0
Trigger1 = Root,Stateno = 2603
value = 1355

;---------------------[効果音]
[State 210, 1];パラパラ
Type = PlaySnd
Trigger1 = animelem = 2
value = 195, 2


[State 0, AngleDraw]
type = AngleDraw
trigger1 = Root,Stateno = 2603
value = -13
;scale = 
ignorehitpause = 1
;persistent = 


;---------------------[ポジションの固定]
[State a]
Type = null;bindtoRoot
Trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

;---------------------------------------------------------------------------

[Statedef 1400]
Type    = S
moveType= A
physics = N
velset = 0,0
juggle = 8
poweradd= 70
anim = 1400
ctrl = 0

[State 0, Turn]
Type = Turn
Trigger1 = Time = 0 && P2Dist x<0
;ignorehitpause = 
;persistent = 


[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1

[State 1000, MAX?乕僕]
Type = varadd
Triggerall = var(41) > 0
Triggerall = time = 0
Trigger1 = (prevStateno = [200,1999])
v = 41
value = -90
ignorehitpause = 1
;---------------------[効果音]
[State 2000, 6]
Type = PlaySnd
Trigger1 = animelem = 4
value = 2100,1

;---------------------[速度]
[State a]
Type = velset
Trigger1 = animelem = 5
x = 21

;---------------------[エフェクト]
[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
time = 30
trans = add
timegap = 1
framegap = 2
length = 20
palbright = 12,12,12
palcontrast = 70,70,70
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9

;---------------------[攻撃判定]
[State 2];攻撃の指定
Type = HitDef
Trigger1 = animelem = 5
attr = S, HA
animType  = hard
damage    = 0,0
getpower = 80,40
hitflag = MAF
guardflag = MA
pausetime = 4,4
sparkno = s7022
sparkxy = -10,-81
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.Type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0,0
air.velocity = -1,-3
fall = 0
air.fall = 1
fall.recover = 0
kill = 0
p2facing = 1
p1Stateno = 1402

;---------------------[ステート移行]
[State a]
Type = changeState
Trigger1 = time = 27
Trigger2 = moveguarded
value = 1401

;---------------------------------------------------------------------------
; JOKER?ダッシュ終了
[Statedef 1401]
Type    = S
moveType= A
physics = S
juggle  = 8
poweradd= 0
velset = 6,0
anim = 1401
ctrl = 0

[State 50, 4];残像消去
Type = AfterImage
Trigger1 = animtime = 0
time = 0

;---------------------[ステート移行]
[State a]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; JOKER?ヒット
[Statedef 1402]
Type    = S
moveType= A
physics = N
juggle  = 8
poweradd= 0
ctrl = 0

[State 1000, Width]
Type = Width
Trigger1 = time >= 0
edge = 15,15

[State 1000, PosSet]
Type = PosSet
Trigger1 = Time = 0
y = 0

[State 1000, 0]
Type = ScreenBound
Trigger1 = time >= 0
value = 0
movecamera = 0,0

;---------------------[相手制御]
[State 801, 2]
Type = TargetBind
Trigger1 = 1
pos = 79,-85

[State a]
Type = targetState
Trigger1 = time = 0
value = 1405

[State a]
Type = helper
Trigger1 = time = 0
Stateno = 1415
id = 1400
pos = 0,0
posType = P1
helperType = normal
keyctrl = 0

;---------------------[ステート移行]
[State a]
Type = changeState
Trigger1 = FrontEdgeDist <= 70
value = 1403

;---------------------------------------------------------------------------
; JOKER?壁ヒット
[Statedef 1403]
Type    = S
moveType= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1402
ctrl = 0

[State 50, 4];残像消去
Type = AfterImage
Trigger1 = animelem = 2
time = 0

[State 1020, 4]
Type = EnvShake
Trigger1 = time = 0
time = 15
ampl = -25
freq = 125
phase = 125

[State explod];ヒット1
Type = Explod
Trigger1 = time = 0
anim = 7002
id = 3000
sprpriority = 2
posType = p1
pos = 62,-68
bindtime = 1
supermove = 0
under = 0

;---------------------[効果音]
[State a]
Type = playsnd
Trigger1 = time = 0
value  = 2200,3

[State a]
Type = playsnd
Trigger1 = time = 0
value  = 490,0

;---------------------[速度]
[State a]
Type = velset
Trigger1 = animelem = 2
x = -4

[State a]
Type = veladd
Trigger1 = animelem = 2,>= 0
x = 0.12

;---------------------[相手制御]
[State 210, Width];画面端の押し戻し判定
Type = Width
Trigger1 = time = 0
edge = 75,0


[State 801, 2]
Type = TargetBind
Trigger1 = time = 0
pos = 72,0

[State 801, 2]
Type = Targetlifeadd
Trigger1 = animelem = 1
value = -105

[State a]
Type = targetState
Trigger1 = time = 0
value = 1406

[State a]
Type = targetState
Trigger1 = animelem = 2
value = 1408


;---------------------[ステート移行]
[State a]
Type = changeState
Trigger1 = time = 28
value = 52

[Statedef 1405]
Type    = A
moveType= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
Type = ChangeAnim2
Trigger1 = Time = 0
value = 2210

[State 1];カメラ固定
Type = screenbound
Trigger1 = 1
value = 1
movecamera = 1,0

;---------------------------------------------------------------------------
;(ENEMY)叩きつけ
[Statedef 1406]
Type    = A
moveType= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
Type = ChangeAnim2
Trigger1 = Time = 0
value = 2211

[State 1];カメラ固定
Type = screenbound
Trigger1 = 1
value = 1
movecamera = 0,0


[Statedef 1415]
Type    = S
moveType= I
physics = N
anim = 9999
sprpriority = -5
ctrl = 0

[State 2150, ScreenBound]
Type = ScreenBound
Trigger1 = 1
value = 1
movecamera = 1,0

[State 2150, DestroySelf]
Type = DestroySelf
;Trigger1 = P2MoveType != H
Trigger1 = Parent, StateNo != [1400,1405]


[Statedef 1408]
Type    = A
moveType= H
physics = N
velset = 0,0

[State 222]
Type = null;nothitby
Trigger1 = 1
value = SCA,AA,AT,AP
time = 2

[State 222]
Type = changeanim
Trigger1 = SelfAnimExist(5061)
Trigger1 = time = 0
value = 5061

[State 222]
Type = changeanim
Trigger1 = !SelfAnimExist(5061)
Trigger1 = time = 0
value = 5050

[State 222]
Type = Turn
Trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 222]
Type = PosAdd
Trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 222, スクロール]
Type = ScreenBound
Trigger1 = 1
value = 1
movecamera = 0,1

[State 222]
Type = null;Explod
Trigger1 = Time = 0
anim = F72
pos = 0, floor(screenpos y) - 50 ;（※５）
posType = back
sprpriority = 3

[State 222, 音を鳴らす]
Type = PlaySnd
Trigger1 = Time = 0
value = F7,0

[State 222, 速度]
Type = velset
Trigger1 = Time = 0
x = 0.7
y = -3

[State 222, 速度]
Type = veladd
Trigger1 = Time > 0
y = .4

[State 222, 相手ステートに戻す]
Type = ChangeState
Trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 1409

[Statedef 1409]
Type    = A
moveType= H
physics = N
velset = 0,0

[State 0, ChangeAnim]
Type = ChangeAnim2
Trigger1 = time=0
value = 810

[State 0,selfState]
Type=changeState
Trigger1=animtime=0
value=1410

;------------------------------------------------------------------------------------
[Statedef 1410]
Type    = L
moveType= H
physics = N 
velset = 0,0

[State 0, ChangeAnim]
Type = ChangeAnim2
Trigger1 = time=0
value = 811

[State 死了]
Type=selfState
Trigger1=!alive
value=5150

[State playsnd]
Type=playsnd
Trigger1=time=0
value=f7,0

[State 1];カメラ固定
Type = screenbound
Trigger1 = 1
value = 1
movecamera = 1,1


[State 0]
Type=playerpush
Trigger1=1
value=0

[State -1]
Type=hitby
Trigger1=1
value=SCA,AA,AT,AP


[State 0,selfState]
Type=SelfState
Trigger1=animtime=0
value=5120


;------------------------------------------------------------------------------------
[Statedef 1411]
Type    = L
moveType= H
physics = N 
velset = 0,0

[State 0, ChangeAnim]
Type = ChangeAnim2
Trigger1 = time=0
value = 811

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause = 
;persistent = 


[State 死了]
Type=selfState
Trigger1=!alive
value=5150

[State playsnd]
Type=playsnd
Trigger1=time=0
value=f7,0

[State 1];カメラ固定
Type = screenbound
Trigger1 = 1
value = 1
movecamera = 1,1


[State 0]
Type=playerpush
Trigger1=1
value=0

[State -1]
Type=hitby
Trigger1=1
value=SCA,AA,AT,AP


[State 0,selfState]
Type=SelfState
Trigger1=animtime=0
value=5120


;------------------------------------------------------------------------------------
[Statedef 1751]
Type    = S
moveType= H
physics = N
velset = 0,0

[State 0, ChangeAnim]
Type = ChangeAnim2
Trigger1 = time=0
value = 1751

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Ishelper
;ignorehitpause = 
;persistent = 


[State 死了]
Type=selfState
Trigger1=!alive
value=5150

[State 0, PosSet]
Type = PosSet
Trigger1 = 1
y = 0
;persistent = 


[State playsnd]
Type=playsnd
Trigger1=time=0
value=f7,0

[State 1];カメラ固定
Type = screenbound
Trigger1 = 1
value = 1
movecamera = 1,1


[State 0]
Type=playerpush
Trigger1=1
value=0

[State -1]
Type=hitby
Trigger1=1
value=SCA,AA,AT,AP


[State 0,selfState]
Type=SelfState
Trigger1=animtime=0
value=0
Ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; K
[Statedef 1500]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1500
sprpriority = 1
ctrl = 0

;---------------------[追加攻撃]
[state a];初期化
type = varset
trigger1 = time = 0
v = 5
value = 0

[state Helper]
type = Helper
TriggerAll = !NumHelper(4007)
TriggerAll = Var(59)>5
Trigger1 = Time = 0
id = 4007
name = "H_helper"
pos = 0,0
postype = p1
stateno = 4007
helpertype = Player
keyctrl = 0
ignorehitpause = 1

[state a]
type = varset
TriggerAll=var(59)=0
TriggerAll = time = 0
Trigger1  = command = "a"|| (!command = "a"&&!command="b")
v = 5
value = 0

[state a]
type = varset
TriggerAll=var(59)=0
triggerall = time = 0
trigger1 = command = "b"
v = 5
value = 1

[state a]
type = varset
TriggerAll=var(59)
Trigger1 = time = 0
v = 5
value = Cond(EnemyNear(Floor(Fvar(37))),Statetype != A,1,0)


;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 7
id = 1500
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1505
helpertype = Normal
keyctrl = 0 
ownpal = 1

[state a];???
type = nothitby
trigger1 = 1
value = SCA
value2 = SCA

;---------------------[当身判定]
[State 1700, 0];
type = ReversalDef
TriggerAll = !Target,ishelper||!Enemynear(Floor(Fvar(37))),Ishelper
trigger1 = animelem = 6,>=0
reversal.attr = SCA, AA,AP,AT
hitflag = MAFD
priority = 6, Miss
pausetime = 5,25
sparkno = s7002
hitsound = S410,0
p2facing = 1
p1stateno = 1510
P2Stateno = 1751

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
; K?当身成功
[Statedef 1510]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1512
sprpriority = 1
ctrl = 0

[state a]
type = changeanim
trigger1 = time = 0
;trigger1 = var(5) = 1
value = 1511

;---------------------[効果音]
[State 210, 1];
type = PlaySnd
trigger1 = time = 0
value = 1500, 0

;---------------------[エフェクト]
[State 00];背景の暗転
type = BGPalfx
trigger1 = time = 0
time = 23
mul = 0,0,0
under = 2

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = time = 0
id = 1500
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1505
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 0, NotHitBy]
type = NotHitBy
TriggerAll = Anim = 1511
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1 
;persistent = 


;---------------------[移動]
[state a]
type = turn
trigger1 = animelem = 2

[state a]
type = posset
trigger1 = animelem = 2
x = enemy,pos x

[state a]
type = posadd
trigger1 = animelem = 2
x = -30

[state a]
type = posadd
trigger1 = animelem = 2
trigger1 = anim  =1511
y = -90

[state a]
type = statetypeset
trigger1 = animelem = 2
trigger1 = anim = 1511
value = A

[state a]
type = veladd
trigger1 = animelem = 2,>=0
trigger1 = anim = 1511
y = 0.36

[state a]
type = ctrlset
trigger1 = animelem = 2,>=0
trigger1 = anim = 1511
value = 1



;---------------------[立ちステートに戻る]

[State 0, ChangeState]
type = ChangeState
TriggerAll =  animelem = 2,>=0
TriggerAll = P2StateType!=A
TriggerAll = Enemynear(Floor(fvar(37))),Stateno = 1751||Ctrl
trigger1 = Var(5)=1
value = 610 
;anim =
;ignorehitpause = 
;persistent = 

[state a]
type = changestate
trigger1 = animtime = 0
trigger1 = var(5) = 0
value = 0
ctrl = 1

[state a]
type = changestate
trigger1 = vel y >0 && pos y >=0
trigger1 = var(5) = 1||anim = 1511
value = 52


;----------------------------------------------------------------------------------------------
[statedef 4007]
type = A
physics = N
anim = 1501

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
;facing = 0
pos = 0,0
ignorehitpause = 1
;persistent = 



[State 6010, 2]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
;flag3 = roundnotover
;ignorehitpause = 
;persistent = 
;-----------------------
;flag = nobardisplay
;flag = noBG
;flag = noFG
;flag = nostandguard
;flag = nocrouchguard
;flag = noairguard
;flag = noautoturn
;flag = nojugglecheck
;flag = nokosnd
;flag = nokoslow
;flag = noshadow
;flag = globalnoshadow
;flag = nomusic
;flag = nowalk
;flag = timerfreeze
;flag = unguardable


[State 0, DestroySelf]
type = DestroySelf
Trigger1 = Root,Stateno != 1500
;ignorehitpause = 
;persistent = 


;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1505]
Type = S
ctrl = 0
anim = 1505
velset = 0,0
moveType = A
physics = S
sprpriority = 2

;---------------------[ポジションの固定]
[State a]
Type = bindtoRoot
Trigger1 = time = 0
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = animelem = 3,>=0
v = 22
value = 10


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; A
[Statedef 1600]
Type    = S
moveType= A
physics = N
juggle  = 0
poweradd= 71
velset = 0,0
anim = 1600
sprpriority = 1
ctrl = 0


[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = time = [0,3]
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
;ignorehitpause = 
;persistent = 


;---------------------[効果音]
[State a];んっふっふ
Type = playsnd
Trigger1 = animelem = 2
value = 1300,0

[State a];ジャンプ
Type = playsnd
Trigger1 = animelem = 2
value = 1000,1

;---------------------[エフェクト]
[State 50, 4];残像
Type = AfterImage
Trigger1 = animelem = 2
time = -1
trans = add1
timegap = 2
framegap = 2
length = 6
palbright = 6,6,6
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1
ignorehitpause = 0

;---------------------[移動、ステートの状態変更]
[State a]
Type = StateTypeset
Trigger1 = animelem = 2
value = A

[State a]
Type = velset
Trigger1 = animelem = 2
y = -11

[State a]
Type = veladd
Trigger1 = animelem = 2,>=0
Trigger1 = animelem = 10,<=0
y = 0.56

[State a]
Type = velset
Trigger1 = animelem = 10
y = 0

[State a]
Type = veladd
Trigger1 = animelem = 10,>=0
Trigger1 = vel y <= 3
y = 0.5
;---------------------[エフェクト]
[State a]
Type = playerpush
Trigger1 = animelem = 10,<=0
value = 0

;---------------------[攻撃]
[State 2];
Type = HitDef
Trigger1 = animelem = 2
Trigger2 = animelem = 3
Trigger3 = animelem = 4
Trigger4 = animelem = 5
Trigger5 = animelem = 6
Trigger6 = animelem = 7
attr = A, SA
animType  = hard
priority = 5, Hit
damage    = 9,2
getpower = 10,10
guardflag = M
pausetime = 4,Cond(p2dist x <= 20 , 5,4)
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.Type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3,-12
air.velocity = Cond(p2dist x <= 20 , 0,-2),-10.5
yaccel = 0.45
fall =1
air.fall = 1
fall.recover = 0

[State 2];
Type = HitDef
Trigger1 = animelem = 8
Trigger1 = hitcount = 6
attr = A, SA
animType  = hard
priority = 5, Hit
damage    = 9,2
getpower = 10,10
guardflag = M
pausetime = 4,5
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.Type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3,-12
air.velocity = Cond(p2dist x <= 5 , 0,-1.5),-6.5
fall =1
air.fall = 1
fall.recover = 0



;---------------------[立ちステートに戻る]
[State a]
Type = changeState
Trigger1 = animelem = 8,>=0
Trigger1 = movehit
Trigger1 = p2dist x <= 2 && p2dist x >= -2
value = 1602

[State a]
Type = changeState
Trigger1 = vel y >0 && pos y >=0
value = 1601

;---------------------------------------------------------------------------
; A?着地
[Statedef 1601]
Type    = S
moveType= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1601
ctrl = 0

;---------------------[]
[State a]
Type = posset
Trigger1 = time = 0
y = 0

[State 50, 4];残像消去
Type = AfterImage
Trigger1 = animtime = 0
time = 0


;---------------------[効果音]
[State a];
Type = playsnd
Trigger1 = time = 0
value = 40,0


[State 00]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; A?成功
[Statedef 1602]
Type    = S
moveType= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,-2
anim = 1602
ctrl = 0
sprpriority = -1


[State 50, 4];残像消去
Type = AfterImage
Trigger1 = time = 0
time = 0

;---------------------[効果音]
[State a];スペキュレーション
Type = playsnd
Trigger1 = animelem = 11
value = 1600,0

[State a];攻撃
Type = playsnd
Trigger1 = animelem = 12
value = 2100,2

;---------------------[エフェクト]
[State 00];背景の暗転
Type = BGPalfx
Trigger1 = animelem = 16,<=0
time = 3
mul = 0,0,0
under = 2
ignorehitpause = 1

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 12
id = 1600
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1603
helperType = normal
keyctrl = 0 
ownpal = 1

;---------------------[速度]
[State a]
Type = velset
Trigger1 = animelem = 9
y = 0

[State a]
Type = veladd
Trigger1 = animelem = 16,>=0
y = 0.4

;---------------------[攻撃]
[State 2];
Type = HitDef
Trigger1 = animelem = 12
attr = A, SA
animType  = hard
priority = 7, Hit
damage    = 294,20
getpower = 61,61
guardflag = HA
pausetime = 21,32
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.Type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = 0,14
air.velocity = 0,14
fall =1
air.fall = 1
fall.recover = 0

;---------------------[相手制御]
[State a]
Type = targetState
Triggerall = numtarget && target,Stateno!=[120,155]
Trigger1 = time = 0
value = 1610


;---------------------[立ちステートに戻る]
[State a]
Type = changeState
Trigger1 = vel y >0 && pos y >=0
value = 1601


;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1603]
Type = S
ctrl = 0
anim = 1603
velset = 0,0
moveType = A
physics = S
sprpriority = 2

;---------------------[効果音]
[State 210, 1];パラパラ
Type = PlaySnd
Trigger1 = animelem = 2
value = 195, 2

;---------------------[ポジションの固定]
[State a]
Type = bindtoRoot
Trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H


;---------------------------------------------------------------------------
;(ENEMY)浮遊
[Statedef 1610]
Type    = A
moveType= H
physics = N
velset = 0,-0.2
sprpriority = 1

[State 820, 1]
Type = ChangeAnim2
Trigger1 = Time = 0
value = 1610

[State 1];カメラ固定
Type = screenbound
Trigger1 = 1
value = 1
movecamera = 0,0



;-------------------------------------------------------------------------------------------------------------------------------
; 残像踏前斩
[Statedef 1550]
Type    = S
moveType= A
physics = S
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1550
sprpriority = 5
ctrl = 0

[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1

[State 1000, MAX?乕僕]
Type = varadd
Triggerall = var(41) > 0
Triggerall = time = 0
Trigger1 = (prevStateno = [200,1999])
v = 41
value = -90
ignorehitpause = 1

[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = Anim = 1551
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 

;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 12
value = 3333, 0

[State 0, PosSet]
Type = PosSet
Trigger1 = 1
y = 0
;ignorehitpause = 
;persistent = 

[State 0, ChangeState]
Type = ChangeAnim
Trigger1 = time = 5
value = 1551
;anim =
;ignorehitpause = 
;persistent = 

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = time = 5
id = 1553
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1553
helperType = normal
keyctrl = 0 
ownpal = 1



[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State 0, VelSet]
Type = VelSet
Trigger1 = Time = [6,12]
x = Abs(Enemynear(Floor(Fvar(37))),Pos x-Pos x)/7.0
y = 0
;ignorehitpause = 
;persistent = 

[State 0, VelSet]
Type = VelMul
Trigger1 = Time = [8,12]
x = 0.80
y = 0
;ignorehitpause = 
;persistent = 


[State 0, Projectile]
Type = null;Projectile
TriggerAll = Anim = 1551
Trigger1 = 1
ProjID =1555
projanim =1555
projhitanim = -1
projremanim = -1
projcancelanim =-1
projscale = 1,1
projremove = 0
projremovetime =1
projhits = 1
projpriority = 99999999999999999999999999999999
projsprpriority = 10
offset = 0,0
posType = p1         ;p2,front,back,left,right
projshadow = 0,0,0
attr = S,NA
animType = medium
damage = 0,0
hitflag = MAF
fall = 0
;p1facing = var(5)
priority = 7,Hit
p1Stateno = 1554       ;投げが成功した場合の移動する１Ｐのステート



[State 800, 1]
Type = null;HitDef
TriggerAll  = Anim = 1551
Trigger1 = 1
attr = S, SA          ;ｓ：立ち　ｎ：通常　ｔ：投げ
priority = 1, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = -1          ;-をつければスパークエフェクトは無い
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
p1Stateno = 1554       ;投げが成功した場合の移動する１Ｐのステート
;hitsound = S800,0
fall = 0              ;落ちる力を２Ｐにかけるか

[State 0, ChangeState]
Type = ChangeState
Trigger1 = time = 13 
value = Cond((PrevStateNo = [200,500)),1552,1551)
ctrl = 0
;ignorehitpause = 
;persistent = 



;-------------------------------------------------------------------------------------------------------------------------------
; helper移位
[Statedef 1553]
Type    = S
moveType= A
physics = S
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1553
sprpriority = 8
ctrl = 0


;点滅
;BC存在??
[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 0
time = 1
add = 96,96,0
color = 186
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 1
Trigger2 = gametime % 14 = 13
time = 1
add = 84,84,0
color = 196
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 2
Trigger2 = gametime % 14 = 12
time = 1
add = 72,72,0
color = 206
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 3
Trigger2 = gametime % 14 = 11
time = 1
add = 60,60,0
color = 216
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 4
Trigger2 = gametime % 14 = 10
time = 1
add = 48,48,0
color = 226
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 5
Trigger2 = gametime % 14 = 9
time = 1
add = 36,36,0
color = 236
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 6
Trigger2 = gametime % 14 = 8
time = 1
add = 24,24,0
color = 246
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 7
time = 1
add = 12,12,0
color = 256
ignorehitpause = 1

[State 0, ChangeAnim]
Type = ChangeAnim
Trigger1 = Root,Stateno = 1551 
Trigger1 = Root,Time>=13
Trigger2 =  Root,StateNo = 1552
Trigger2 = Root,Time>=8 
value = 1551
;elem = 1
;persistent = 


[State 0, VelSet]
Type = VelSet
TriggerAll = Root,Stateno = 1551
Trigger1 = Root,Time>=13
x = ABS(Root,Pos x-Pos x)/5.0
y = 0
;persistent = 

[State 0, VelSet]
Type = VelSet
TriggerAll = Root,Stateno = 1552
Trigger1 = Root,Time>=8
x = ABS(Root,Pos x-Pos x)/5.0
y = 0
;persistent = 


[State 0, PosSet]
Type = PosSet
Trigger1 = 1
y = 0
;ignorehitpause = 
;persistent = 




[State 0, VelSet]
Type = VelSet
Trigger1 = Root,Stateno = 1551 || Root,Stateno = 1552
Trigger1 = Rootdist x= [-20,20]
Trigger1 = Vel x>0
x = 0
y = 0
;ignorehitpause = 
;persistent = 

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Root,Stateno = 1551  || Root,Stateno = 1552 
Trigger1 = (Rootdist x= [-20,20]) 
Trigger2 = Root,Stateno!=[1550,1569]
Trigger3 = Root,Stateno = [1556,1560]
Trigger3 = Floor(Abs(Helper(1558),Var(1)-Pos x))<30
;ignorehitpause = 
;persistent = 



;-----------------------------------------------------------------------------------------------------------------------------
; ; 残像踏前斩一段
[Statedef 1551]
Type    = S
moveType= A
physics = N
juggle  = 0
poweradd= 101
velset = 0,0
anim = 1552
sprpriority =2
ctrl = 0



[State 0, Trans]
Type = Trans
Trigger1 = 1
trans = addalpha ;none, add, addalpha, add1, sub
alpha =180+Time* 6,120-Time * 6
;ignorehitpause = 
;persistent = 


;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = Time = 7
value = 3333, 0


[State 0, VelSet]
Type = VelSet
Trigger1 = 1
x = 0
y = 0
;ignorehitpause = 
;persistent = 

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 2
value = 1000, 2

[State 0, PosSet]
Type = PosSet
Trigger1 = 1
y = 0
ignorehitpause = 1
;persistent = 

[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = AnimElem = 7,>=0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = Time = 8
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1555
helperType = normal
keyctrl = 0 
ownpal = 1


[State 210, 2]
Type = HitDef
Trigger1 = Time = 0 
attr = S, SA
animType  = medium
damage    = 46,10
priority = 4, Hit
getpower = 81,81
guardflag = MA
pausetime = 14,25
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = low
ground.slidetime = 17
ground.hittime  = 26
ground.velocity = -6.2
air.velocity = -4.8,-7.2
yaccel = 0.42
fall = 0
air.fall = 1
fall.recover = 0
ID = 200
envshake.time = 15
envshake.ampl = 5
envshake.freq = 80
envshake.phase = 80
P2Stateno = 13103



[State a]
Type = changeState
Trigger1 = MoveContact 
Trigger1 = Time>19
;Trigger1 = Command = "強ダイア" || Command = "弱ダイア"
value = 1556


[State a]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1


;-----------------------------------------------------------------------------------------------------------------------------
; 强制:残像踏前斩一段
[Statedef 1552]
Type    = S
moveType= A
physics = N
juggle  = 0
poweradd= 101
velset = 0,0
anim = 1554
sprpriority =2
ctrl = 0



[State 0, Trans]
Type = Trans
Trigger1 = 1
trans = addalpha ;none, add, addalpha, add1, sub
alpha =180+Time* 6,120-Time * 6
;ignorehitpause = 
;persistent = 


;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = Time = 7
value = 3333, 0


[State 0, VelSet]
Type = VelSet
Trigger1 = 1
x = 0
y = 0
;ignorehitpause = 
;persistent = 

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 2
value = 1000, 2

[State 0, PosSet]
Type = PosSet
Trigger1 = 1
y = 0
ignorehitpause = 1
;persistent = 

[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = AnimElem = 7,>=0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = Time = 1
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1555
helperType = normal
keyctrl = 0 
ownpal = 1


[State 210, 2]
Type = HitDef
Trigger1 = Time = 0 
attr = S, SA
animType  = medium
damage    = 46,10
priority = 4, Hit
getpower = 81,81
guardflag = MA
pausetime = 14,25
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = low
ground.slidetime = 17
ground.hittime  = 26
ground.velocity = -6.2
air.velocity = -4.8,-7.2
yaccel = 0.42
fall = 0
air.fall = 1
fall.recover = 0
ID = 200
envshake.time = 15
envshake.ampl = 5
envshake.freq = 80
envshake.phase = 80
P2Stateno = 13103

[State a]
Type = changeState
TriggerAll = MoveContact 
Trigger1 = Time>8
;Trigger1 = Command = "強ダイア" || Command = "弱ダイア"
value = 1556


[State a]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1555]
Type = S
ctrl = 0
anim = 1355
velset = 0,0
moveType = A
physics = S
sprpriority = 2

;---------------------[アニメーション変更]
[State a]
Type = changeanim
TriggerAll= time = 0
Trigger1 = Root,Stateno = [1551,1552]
value = 1355


;---------------------[アニメーション変更]
[State a]
Type = changeanim
TriggerAll= time = 0
Trigger1 = Root,Stateno =1560
value = 1205



[State a]
Type = changeanim
TriggerAll= time = 0
Trigger1 = Root,Stateno = 1557
Trigger2= Root,Stateno = 2602
value = 1005


;---------------------[効果音]
[State 210, 1];パラパラ
Type = PlaySnd
TriggerAll = animelem = 2
Trigger1 = Root,Stateno = [1551,1552]
Trigger2 = Root,Stateno = 1560
value = 195, 2

[State 210, 1];パラパラ
Type = PlaySnd
Trigger1 = Root,Stateno = [1556,1557]
Trigger1 = animelem = 2
value = 195, 1

[State 0, AngleDraw]
Type = AngleDraw
Trigger1= (Root,Stateno = [1551,1552])
Trigger2 = (Root,Stateno = [2602,2603])
value = -10
ignorehitpause = 1
;persistent = 


;---------------------[ポジションの固定]
[State a]
Type = bindtoRoot
TriggerAll = (Root,Stateno = [1551,1552])
Trigger1 = 1
facing = 1
pos = -10,0
ignorehitpause = 1


[State a]
Type = bindtoRoot
TriggerAll = (Root,Stateno =2603)
Trigger1 = 1
facing = 1
pos = -25,0
ignorehitpause = 1


[State a]
Type = bindtoRoot
Trigger1 = !(Root,Stateno =2603)
Trigger2 = !(Root,Stateno = [1551,1552])
facing = 1
pos = 0,0
ignorehitpause = 1





;---------------------[透過(winmugen専用記述)]
[State a]
Type = Trans
Trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[State a]
Type = varadd
Trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
Type = destroyself
Trigger1 = animtime = 0
Trigger2 = Root,moveType = H



;-------------------------------------------------------------------------------------------------------------------------------
; 残像踏前斩二段前置
[Statedef 1556]
Type    = S
moveType= A
physics = S
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1550
sprpriority = 5
ctrl = 0

[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1

[State 1000, MAX?乕僕]
Type = varadd
Triggerall = var(41) > 0
Triggerall = time = 0
Trigger1 = (prevStateno = [200,1999])
v = 41
value = -90
ignorehitpause = 1

[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = Anim = 1551
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 

;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 12
value = 3333, 0

[State 0, PosSet]
Type = PosSet
Trigger1 = 1
y = 0
;ignorehitpause = 
;persistent = 

[State 0, ChangeState]
Type = ChangeAnim
Trigger1 = time = 5
value = 1551
;anim =
;ignorehitpause = 
;persistent = 

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = time = 5
id = 1558
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1558
helperType = normal
keyctrl = 0 
ownpal = 1


[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2



[State 0, Trans]
Type = Trans
Trigger1 = time >5
trans = addalpha ;none, add, addalpha, add1, sub
alpha =Time* 18,256-Time * 18
;ignorehitpause = 
;persistent = 

[State 0, VelSet]
Type = VelSet
Trigger1 = Time = [6,12]
x = Abs(Enemynear(Floor(Fvar(37))),Pos x-Pos x)/7.0
y = 0
;ignorehitpause = 
;persistent = 

[State 0, VelSet]
Type = VelMul
Trigger1 = Time = [8,12]
x = 0.80
y = 0
;ignorehitpause = 
;persistent = 


[State 0, Projectile]
Type = null;Projectile
TriggerAll = Anim = 1551
Trigger1 = 1
ProjID =1555
projanim =1555
projhitanim = -1
projremanim = -1
projcancelanim =-1
projscale = 1,1
projremove = 0
projremovetime =1
projhits = 1
projpriority = 99999999999999999999999999999999
projsprpriority = 10
offset = 0,0
posType = p1         ;p2,front,back,left,right
projshadow = 0,0,0
attr = S,NA
animType = medium
damage = 0,0
hitflag = MAF
fall = 0
;p1facing = var(5)
priority = 7,Hit
p1Stateno = 1554       ;投げが成功した場合の移動する１Ｐのステート



[State 800, 1]
Type = null;HitDef
TriggerAll  = Anim = 1551
Trigger1 = 1
attr = S, SA          ;ｓ：立ち　ｎ：通常　ｔ：投げ
priority = 1, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = -1          ;-をつければスパークエフェクトは無い
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
p1Stateno = 1554       ;投げが成功した場合の移動する１Ｐのステート
;hitsound = S800,0
fall = 0              ;落ちる力を２Ｐにかけるか

[State 0, ChangeState]
Type = ChangeState
Trigger1 = time = 13
value = 1557
ctrl = 0
;ignorehitpause = 
;persistent = 


;-----------------------------------------------------------------------------------------------------------------------------
;残像踏前斩二段
[Statedef 1557]
Type    = S
moveType= A
physics = N
juggle  = 0
poweradd= 101
velset = 0,0
anim = 1557
sprpriority =2
ctrl = 0


[State 0, Trans]
Type = Trans
Trigger1 = 1
trans = addalpha ;none, add, addalpha, add1, sub
alpha =180+Time* 6,120-Time * 6
;ignorehitpause = 
;persistent = 

;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = Animelem = 4
value = 1000, 0


[State 0, VelSet]
Type = VelSet
Trigger1 = 1
x = 0
y = 0
;ignorehitpause = 
;persistent = 

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 5
value = 1000, 2

[State 0, PosSet]
Type = PosSet
Trigger1 = 1
y = 0
ignorehitpause = 1
;persistent = 

[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = AnimElem = 7,>=0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = Animelem = 5
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1555
helperType = normal
keyctrl = 0 
ownpal = 1


[State 210, 2]
Type = HitDef
Trigger1 = Time = 0 
attr = S, SA
animType  = medium
damage    = 64,10
priority = 4, Hit
getpower = 81,81
guardflag = MA
pausetime = 14,25
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = high
ground.slidetime = 23
ground.hittime  = 35
ground.velocity = -5
air.velocity = -3.7,-7.2
yaccel = 0.42
fall = 0
air.fall = 1
fall.recover = 0
ID = 200
envshake.time = 15
envshake.ampl = 5
envshake.freq = 80
envshake.phase = 80
P2Stateno = 13103


[State a]
Type = ChangeState
TriggerAll =!Var(59)
TriggerAll = MoveContact 
Trigger1 = (command = "Q1" )|| (command = "Q")
Trigger1 = AnimElemTime(6)>=0
value = 1559


[State a]
Type = ChangeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------------------------------------------
; helper移位
[Statedef 1558]
Type    = S
moveType= A
physics = S
juggle  = 0
velset = 0,0
anim = 1553
;Anim = 1560
sprpriority = 8
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = Time<=14
v = 1    ;fv = 10
value = Pos x
ignorehitpause = 1
;persistent = 


;点滅
;BC存在??
[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 0
time = 1
add = 96,96,0
color = 186
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 1
Trigger2 = gametime % 14 = 13
time = 1
add = 84,84,0
color = 196
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 2
Trigger2 = gametime % 14 = 12
time = 1
add = 72,72,0
color = 206
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 3
Trigger2 = gametime % 14 = 11
time = 1
add = 60,60,0
color = 216
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 4
Trigger2 = gametime % 14 = 10
time = 1
add = 48,48,0
color = 226
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 5
Trigger2 = gametime % 14 = 9
time = 1
add = 36,36,0
color = 236
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 6
Trigger2 = gametime % 14 = 8
time = 1
add = 24,24,0
color = 246
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 7
time = 1
add = 12,12,0
color = 256
ignorehitpause = 1

[State 0, ChangeAnim]
Type = ChangeAnim
Trigger1 = Root,Stateno = 1557
Trigger1 = Root,Time>=18
value = 1551
;elem = 1
;ignorehitpause = 
;persistent = 


[State 0, PosSet]
Type = PosSet
Trigger1 = 1
y = 0
;ignorehitpause = 
;persistent = 


[State 0, VelSet]
Type = VelSet
Trigger1 = Root,Stateno = 1557
Trigger1 = Root,Time>=18
x = ABS(Root,Pos x-Pos x)/5.0
;x = 14.3
y = 0
;ignorehitpause = 
;persistent = 


[State 0, VelSet]
Type = VelSet
Trigger1 = Root,Stateno = 1557
Trigger1 = Rootdist x= [-20,20]
Trigger1 = Vel x>0
x = 0
y = 0
;ignorehitpause = 
;persistent = 

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Root,Stateno = 1557  
Trigger1 = Rootdist x= [-20,20]
Trigger2 = Root,Stateno!=[1556,1557]
;ignorehitpause = 
;persistent = 


;-------------------------------------------------------------------------------------------------------------------------------
; 残像踏前斩3段起手
[Statedef 1559]
Type    = S
moveType= A
physics = S
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1550
sprpriority = 5
ctrl = 0

[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1

[State 1000, MAX?乕僕]
Type = varadd
Triggerall = var(41) > 0
Triggerall = time = 0
Trigger1 = (prevStateno = [200,1999])
v = 41
value = -90
ignorehitpause = 1

[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = Anim = 1551
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 

;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 12
value = 3333, 0

[State 0, PosSet]
Type = PosSet
Trigger1 = 1
y = 0
;ignorehitpause = 
;persistent = 

[State 0, ChangeState]
Type = ChangeAnim
Trigger1 = time = 5
value = 1551
;anim =
;ignorehitpause = 
;persistent = 

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = time = 5
id = 1561
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1561
helperType = normal
keyctrl = 0 
ownpal = 1


[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2



[State 0, Trans]
Type = Trans
Trigger1 = time >5
trans = addalpha ;none, add, addalpha, add1, sub
alpha =Time* 18,256-Time * 18
;ignorehitpause = 
;persistent = 

[State 0, VelSet]
Type = VelSet
Trigger1 = Time = [6,12]
x = Abs(Enemynear(Floor(Fvar(37))),Pos x-Pos x)/7.0
y = 0
;ignorehitpause = 
;persistent = 

[State 0, VelSet]
Type = VelMul
Trigger1 = Time = [8,12]
x = 0.80
y = 0
;ignorehitpause = 
;persistent = 


[State 0, Projectile]
Type = null;Projectile
TriggerAll = Anim = 1551
Trigger1 = 1
ProjID =1555
projanim =1555
projhitanim = -1
projremanim = -1
projcancelanim =-1
projscale = 1,1
projremove = 0
projremovetime =1
projhits = 1
projpriority = 99999999999999999999999999999999
projsprpriority = 10
offset = 0,0
posType = p1         ;p2,front,back,left,right
projshadow = 0,0,0
attr = S,NA
animType = medium
damage = 0,0
hitflag = MAF
fall = 0
;p1facing = var(5)
priority = 7,Hit
p1Stateno = 1554       ;投げが成功した場合の移動する１Ｐのステート



[State 800, 1]
Type = null;HitDef
TriggerAll  = Anim = 1551
Trigger1 = 1
attr = S, SA          ;ｓ：立ち　ｎ：通常　ｔ：投げ
priority = 1, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = -1          ;-をつければスパークエフェクトは無い
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
p1Stateno = 1554       ;投げが成功した場合の移動する１Ｐのステート
;hitsound = S800,0
fall = 0              ;落ちる力を２Ｐにかけるか

[State 0, ChangeState]
Type = ChangeState
Trigger1 = time = 13
value = 1560
ctrl = 0
;ignorehitpause = 
;persistent = 


;-----------------------------------------------------------------------------------------------------------------------------
;残像踏前斩3段
[Statedef 1560]
Type    = S
moveType= A
physics = N
juggle  = 0
poweradd= 101
velset = 0,0
anim = 1559
sprpriority =2
ctrl = 0

[State a];斬る
Type = playsnd
Trigger1 = animelem = 7
value = 1000,2


[State 0, PosAdd]
type = PosAdd
TriggerAll = Prevstateno = 2700
Trigger1 = Time >15
Trigger1 = pos x >0
x = -8*facing
y = 0
ignorehitpause = 1
;persistent = 

[State 0, PosAdd]
type = PosAdd
TriggerAll = Prevstateno = 2700
Trigger1 = Time >15
Trigger1 = pos x <0
x = 8*facing
y = 0
ignorehitpause = 1
;persistent = 

[State 0, ScreenBound]
type = ScreenBound
Trigger1 = Prevstateno = 2700
value = 1
movecamera = 0,0
ignorehitpause = 1
;persistent = 


[State 0, PosSet]
type = PosSet
Trigger1 = Prevstateno = 2700
Trigger1 = pos x = 0
x = 0
y = 0
ignorehitpause = 1
;persistent = 


[State 1000, 5]
Type = Explod
TriggerAll = Prevstateno = 2700
TriggerAll = Time = 1
Trigger1 = facing = -1
anim = 10009
sprpriority = -10
posType = right
pos = 0,0
bindtime = -1
supermove = 1
under = 1
ownpal = 1
facing = -1
trans = add



[State 1000, 5]
Type = Explod
TriggerAll = Prevstateno = 2700
TriggerAll = Time = 1
Trigger1 = facing = 1
anim = 10009
sprpriority = -10
posType = left
pos = 0,0
bindtime = -1
supermove = 1
under = 1
ownpal = 1
trans = add

[State 0, BGPalFX]
type = BGPalFX
TriggerAll = PrevStateno = 2700
trigger1 = 1
time = 1
add = -255,-255,-255
;mul = 256,256,256
;sinadd = 0,0,0,10
;invertall = 0
;color = 256
ignorehitpause = 1
;persistent = 

[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
Type = EnvColor
Trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0


[State 0, VarSet]
Type = VarSet
Trigger1 = Time = 1
v = 41    ;fv = 10
value = 0
ignorehitpause = 1
;persistent = 


[State 0, Trans]
Type = Trans
Trigger1 = 1
trans = addalpha ;none, add, addalpha, add1, sub
alpha =180+Time* 6,120-Time * 6
;ignorehitpause = 
;persistent = 



;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = Animelem = 4
value = 1200, 2


[State 0, VelSet]
Type = VelSet
Trigger1 = 1
x = 0
y = 0
;ignorehitpause = 
;persistent = 

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 7
value = 1200, 1

[State 0, PosSet]
Type = PosSet
Trigger1 = 1
y = 0
ignorehitpause = 1
;persistent = 

[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = AnimElem = 10,>=0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 

;---------------------[速度]
[State a]
Type = veladd
Trigger1 = animelem = 8
x = -6


;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = Animelem = 7
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1555
helperType = normal
keyctrl = 0 
ownpal = 1


[State 210, 2]
Type = HitDef
Trigger1 = Time = 0 
attr = S, SA
animType  = medium
damage    = 91,10
priority = 4, Hit
getpower = 81,81
guardflag = MA
pausetime = 15,35
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4,-8
air.velocity = -3,-8
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
ID = 200
envshake.time = 15
envshake.ampl = 15
envshake.freq = 80
envshake.phase = 80
P2Stateno = Cond(PrevStateno = 2700,2206,13103)

[State 0, ChangeState]
type = ChangeState
TriggerAll = PrevStateno = 2700
TriggerAll = Numtarget
Trigger1 = Animelem = 17,=1
value = 2701
ctrl = 0
;anim =
;ignorehitpause = 
;persistent = 


[State a]
Type = changeState
TriggerAll = PrevStateno != 2700
Trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------------------------------------------
; helper移位
[Statedef 1561]
Type    = S
moveType= A
physics = S
juggle  = 0
velset = 0,0
anim = 1553
;Anim = 1561
sprpriority = 8
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = Time<=14
v = 1    ;fv = 10
value = Pos x
ignorehitpause = 1
;persistent = 


;点滅
;BC存在??
[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 0
time = 1
add = 96,96,0
color = 186
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 1
Trigger2 = gametime % 14 = 13
time = 1
add = 84,84,0
color = 196
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 2
Trigger2 = gametime % 14 = 12
time = 1
add = 72,72,0
color = 206
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 3
Trigger2 = gametime % 14 = 11
time = 1
add = 60,60,0
color = 216
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 4
Trigger2 = gametime % 14 = 10
time = 1
add = 48,48,0
color = 226
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 5
Trigger2 = gametime % 14 = 9
time = 1
add = 36,36,0
color = 236
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 6
Trigger2 = gametime % 14 = 8
time = 1
add = 24,24,0
color = 246
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Root,Var(41) > 0
Trigger1 = gametime % 14 = 7
time = 1
add = 12,12,0
color = 256
ignorehitpause = 1

[State 0, ChangeAnim]
Type = ChangeAnim
Trigger1 = Root,Stateno = 1560
Trigger1 = Root,Time>17
Trigger2 = Root,Stateno = 2700
Trigger2 = Root,Time>47
value = 1551
;elem = 1
;ignorehitpause = 
;persistent = 


[State 0, PosSet]
Type = PosSet
Trigger1 = 1
y = 0
;ignorehitpause = 
;persistent = 


[State 0, VelSet]
Type = VelSet
Trigger1 = Root,Stateno = 1560
Trigger1 = Root,Time>17
x = ABS(Root,Pos x-Pos x)/5.0
y = 0
;ignorehitpause = 
;persistent = 


[State 0, VelSet]
Type = VelSet
Trigger1 = Root,Stateno = 1560
Trigger1 = Rootdist x= [-20,20]
Trigger1 = Vel x>0
x = 0
y = 0
;ignorehitpause = 
;persistent = 

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Root,Stateno = 1560  
Trigger1 = Rootdist x= [-20,20]
Trigger2 = Root,Stateno!=[1559,1560]
;ignorehitpause = 
;persistent = 




;---------------------------------------------------------------------------
; ふっ飛ばし攻撃
[Statedef 1563]
Type    = S
moveType= A
physics = S
juggle  = 50
poweradd= 50
ctrl = 0
velset = 0,0
anim = Cond((PrevStateno = [105,106]),294,290)
sprpriority = 2

[State 240, 1]
Type = PlaySnd
TriggerAll = PrevStateno = [105,106]
Trigger1 = animelem =1
value = 181, 0

[State 240, 1]
Type = PlaySnd
TriggerAll = PrevStateno != [105,106]
Trigger1 = animelem = 3
value = 181, 0

[State 200, 1];
Type = PlaySnd
Trigger1 = Time = 1
value = 290, 0

[State 0, VelSet]
Type = VelSet
TriggerAll = PrevStateno = [105,106]
Trigger1 = Time = 2
x = -3.5
y = -5.2
;ignorehitpause = 
;persistent = 


[State 0, VelSet]
Type = VelSet
TriggerAll = PrevStateno != [105,106]
Trigger1 = Time = 13
x = -3.5
y = -5.8
;ignorehitpause = 
;persistent = 

[State 0, StateTypeSet]
type = StateTypeSet
TriggerAll = PrevStateno = [105,106]
trigger1 = Time>1
statetype = A       ;S,A,C,L
movetype = A      ;I,A,H
physics = N         ;A,C,S,N
;ignorehitpause = 
;persistent = 

[State 0, StateTypeSet]
type = StateTypeSet
TriggerAll = PrevStateno != [105,106]
trigger1 = Time>12
statetype = A       ;S,A,C,L
movetype = A      ;I,A,H
physics = N         ;A,C,S,N
;ignorehitpause = 
;persistent = 


[State 0, VelAdd]
Type = VelAdd
TriggerAll = PrevStateno = [105,106]
Trigger1 = Time>=1
x = 0
y = .36
;ignorehitpause = 
;persistent = 

[State 0, VelAdd]
Type = VelAdd
TriggerAll = PrevStateno != [105,106]
Trigger1 = Time>=13
x = 0
y = .36
;ignorehitpause = 
;persistent = 

[State 240, 2]
Type = null;HitDef
Trigger1 = Time = 0
attr = S, NA
animType  = Heavy
damage    = 83 
priority = 6, Hit
getpower = 162,162
guardflag = MA
pausetime = 11,12
sparkno = s7001
sparkxy = -15,-95
hitsound   = s490,0
guard.sparkno = s7011
guardsound = s121,0
ground.Type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6.5
air.velocity = -5,-6.8
yaccel = 0.45
fall = 1
fall.recover = 0
ID = 1300
nochainID = 1100
P2StateNo = 13103

[State a];
Type = Helper
TriggerAll = PrevStateno = [105,106]
Trigger1 = animelem = 1,=2
id = 252
name = "ka-do"
sprpriority = 2
pos = 45,-91
posType = p1
Stateno = 252
helperType = normal
keyctrl = 0 
ownpal = 1

;---------------------[ヘルパー]
[State a];
Type = Helper
TriggerAll = PrevStateno != [105,106]
Trigger1 = animelem = 4,=2
id = 252
name = "ka-do"
sprpriority = 2
pos = 45,-91
posType = p1
Stateno = 252
helperType = normal
keyctrl = 0 
ownpal = 1

[State 240, 4]
Type = ChangeState
Trigger1 = Vel y>0&& Pos y>=0
value = 52
anim = 47


;---------------------------------------------------------------------------
;(ENEMY)???i?_???[?W
[Statedef 1564]
Type    = S
moveType= H
physics = N
velset = 0,0
sprpriority = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1
;persistent = 


[State 820, 1]
Type = ChangeAnim2
Trigger1 = Time = 0
value = 295


[State 821, 3] 
Type = SelfState
Trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------------------------------------------------------
; 十字切
[Statedef 1700]
Type    = S
moveType= A
physics = S
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1700
sprpriority = 1
ctrl = 0

[State 1000, ?柵]
Type = palfx
Triggerall = var(41) > 0
Triggerall = time <= 5
Trigger1 = (prevStateno = [200,1999])
time = 2
add = 256,256,256
color = 1
ignorehitpause = 1

[State 1000, MAX?乕僕]
Type = varadd
Triggerall = var(41) > 0
Triggerall = time = 0
Trigger1 = (prevStateno = [200,1999])
v = 41
value = -90
ignorehitpause = 1

[State 0, TargetBind]
Type = TargetBind
TriggerAll = NumTarget
Trigger1 = Movehit = 1
time = 1
pos = 80,0
ignorehitpause = 1
;persistent = 


;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 12
value = 3333, 0

[State 0, PosSet]
Type = PosSet
Trigger1 = 1
y = 0
;ignorehitpause = 
;persistent = 


[State 0, VelSet]
Type = VelSet
Trigger1 = Time = [12,14]
x = 20.2
y = 0
;ignorehitpause = 
;persistent = 

[State 0, VelAdd]
Type = VelAdd
Trigger1 = Time = [12,14]
x = 24.6
y = 0
;ignorehitpause = 
;persistent = 

[State 0, VelSet]
Type = VelSet
Trigger1 = movehit&&numtarget
Trigger2 = Time >=15
x = 0
y = 0
;ignorehitpause = 
;persistent = 

;---------------------[効果音]
[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 3
value = 1000, 1

[State 200, 1];
Type = PlaySnd
Trigger1 = animelem = 3
value = 1000, 2

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 11
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
posType = p1
Stateno = 1007
helperType = normal
keyctrl = 0 
ownpal = 1

;---------------------[攻撃判定]
[State 210, 2]
Type = HitDef
Trigger1 = AnimElem = 10
attr = S, SA
animType  = hard
damage    = 0,0
priority = 5, Hit
pausetime = 0,0
getpower = 51,51
guardflag = MA
sparkno = -1
sparkxy = -10,-70
hitsound   =-1
guardsound = -1
guard.sparkno = -1
ground.Type = low
ground.slidetime = 20
ground.hittime  = 17
ground.velocity = -1,-4
guard.velocity = -1
air.velocity = -1,-4
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
ID = 200
envshake.time = 4
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80
P2StateNo = 13103

;---------------------[攻撃判定]
[State 210, 2]
Type = HitDef
Trigger1 = AnimElem = 11
attr = S, SA
animType  = hard
damage    = 70,10
priority = 5, Hit
pausetime = 3,16
getpower = 51,51
guardflag = MA
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = low
ground.slidetime = 20
ground.hittime  = 17
ground.velocity = -8,-4
guard.velocity = -16
air.velocity = -8,-4
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
ID = 200
envshake.time = 4
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80

[State 220, 音を鳴らす]
Type = PlaySnd
Trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2



[State 0, ChangeState]
Type = ChangeState
Trigger1 = animelem = 12
value = 1750
ctrl = 0
;anim =
;ignorehitpause = 
;persistent = 

;-----------------------------------------------------------------------------------------------------------------------------
; 十字切二段
[Statedef 1750]
Type    = S
moveType= A
physics = N
juggle  = 0
poweradd= 101
velset = 0,0
anim = 1750
sprpriority = 1
ctrl = 0

[State 0, TargetBind]
Type = null;TargetBind
TriggerAll = NumTarget
Trigger1 = Movehit = 1
time = 1
pos = 70,0
ignorehitpause = 1
;persistent = 



[State -2, EnvColor]
Type = EnvColor
Trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0

;---------------------[ヘルパー]
[State a];
Type = Helper
Trigger1 = animelem = 3
id = 3000
name = "ka-do"
sprpriority = 2
pos = 20,0
posType = p1
Stateno = 1006
helperType = normal
keyctrl = 0 
ownpal = 1

[State 50, 4];←成功したときの残像
Type = AfterImage
Trigger1 = time = 1
time = 15
trans = add
timegap = 1
framegap = 2
length = 15
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9


[State 210, 2]
Type = HitDef
Trigger1 = Time = 0
attr = S, SA
animType  = hard
damage    = 91,10
priority = 4, Hit
getpower = 81,81
guardflag = MA
pausetime = 14,25
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.Type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3,-7.8
air.velocity = -3,-7.2
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
ID = 200
envshake.time = 15
envshake.ampl = 5
envshake.freq = 80
envshake.phase = 80
P2Stateno = 13103


[State a]
Type = changeState
Trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Varのラウンド持ち越し
[Statedef 959339]
Type = S

;[State 5900, 1] ;Clear all int variables
;Type =null; VarRangeSet
;Trigger1 = roundsexisted = 0
;first = 2
;last = 59
;value = 0

;[State 5900, 2] ;Clear all float variables
;Type = null;VarRangeSet
;Trigger1 = roundsexisted = 0
;fvalue = 0




[State 5900, 3] ;Intro for round 1
Type = ChangeState
Trigger1 = roundno = 1
value = 190


[State 181, 1]
Type = NotHitBy
Trigger1 = 1
value = SCA
time = 1



;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 13102]
Type    = S
moveType= H
physics = N
velset = 0,0

[State 0, DefenceMulSet]
Type = DefenceMulSet
Trigger1 = 1
value =1
;ignorehitpause = 
;persistent = 


[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = GetHitVar(animType) != [3,5]
value = Cond((GetHitVar(groundType) = 1),5000,5010) + GetHitVar(animType)

[State 5000, 2] ;Anim for HIT_BACK
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = GetHitVar(animType) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = (GetHitVar(animType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animType)))
value = 5047 + GetHitVar(animType) ;5051 - 4 + Type

[State 5000, 4] ;Freeze anim
Type = ChangeAnim
Trigger1 = Time > 0
value = anim

[State 5000, 5] ;State Type gets set to aerial if getting hit up
Type = StateTypeSet
Trigger1 = Time = 0
Trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
Trigger2 = Pos Y != 0
StateType = a

[State 5000, 6]
Type = ChangeState
Trigger1 = HitShakeOver
Trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 13104 ;HITG_SLIDE

[State 5000, 7]
Type = ChangeState
Trigger1 = HitShakeOver
value = 95633

[State 5000, FFB Light]
Type = ForceFeedback
Trigger1 = anim = 5000
Trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
Type = ForceFeedback
Trigger1 = anim = 5001
Trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Ishelper
;ignorehitpause = 
;persistent = 

[State 5000, FFB Hard]
Type = ForceFeedback
Trigger1 = anim = 5012
Trigger2 = anim = 5002
Trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140


;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 13103]
Type    = S
moveType= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = GetHitVar(animType) != [3,5]
value = Cond((GetHitVar(groundType) = 1),5000,5010) + GetHitVar(animType)

[State 5000, 2] ;Anim for HIT_BACK
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = GetHitVar(animType) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = (GetHitVar(animType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animType)))
value = 5047 + GetHitVar(animType) ;5051 - 4 + Type

[State 5000, 4] ;Freeze anim
Type = ChangeAnim
Trigger1 = Time > 0
value = anim

[State 5000, 5] ;State Type gets set to aerial if getting hit up
Type = StateTypeSet
Trigger1 = Time = 0
Trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
Trigger2 = Pos Y != 0
StateType = a

[State 5000, 6]
Type = ChangeState
Trigger1 = HitShakeOver
Trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 13104 ;HITG_SLIDE

[State 5000, 7]
Type = ChangeState
Trigger1 = HitShakeOver
value = 95633

[State 5000, FFB Light]
Type = ForceFeedback
Trigger1 = anim = 5000
Trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
Type = ForceFeedback
Trigger1 = anim = 5001
Trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Ishelper
;ignorehitpause = 
;persistent = 

[State 5000, FFB Hard]
Type = ForceFeedback
Trigger1 = anim = 5012
Trigger2 = anim = 5002
Trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 13104]
Type    = S
moveType= H
physics = S

[State 5001, 1]
Type = HitVelSet
Trigger1 = Time = 0
x = 1

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Ishelper
;ignorehitpause = 
;persistent = 

[State 5001, 2]
Type = ChangeAnim
Trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animType) + (GetHitVar(groundType)=2)*10

[State 5001, 3] ;Stop sliding back
Type = VelMul
Trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
Type = VelSet
Trigger1 = HitOver
x = 0

[State 5001, 5]
Type = DefenceMulSet
Trigger1 = HitOver
value = 1

[State 5001, 6]
Type = selfState
Trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 13105]
Type    = C
moveType= H
physics = N
velset = 0,0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = GetHitVar(animType) != [3,5]
value = 5020 + GetHitVar(animType)

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Ishelper
;ignorehitpause = 
;persistent = 

[State 5010, 2] ;Anim for HIT_BACK
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = GetHitVar(animType) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = (GetHitVar(animType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animType)))
value = 5047 + GetHitVar(animType) ;5051 - 4 + Type

[State 5010, 4] ;Freeze anim
Type = ChangeAnim
Trigger1 = Time > 0
value = anim

[State 5010, 5] ;State Type gets set to aerial if getting hit up
Type = StateTypeSet
Triggerall = Time = 0
Trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
Trigger2 = Pos Y != 0
StateType = a

[State 5010, 6]
Type = ChangeState
Trigger1 = HitShakeOver
Trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 13106 ;HITC_SLIDE

[State 5010, 7]
Type = ChangeState
Trigger1 = HitShakeOver
value = 95633

[State 5010, FFB Light]
Type = ForceFeedback
Trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
Type = ForceFeedback
Trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
Type = ForceFeedback
Trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140


;---------------------------------------------------------------------------

[Statedef 2911]
Type    = U
moveType= U
physics = U
ctrl = 0

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = ishelper
;ignorehitpause = 
;persistent = 

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Ishelper
;ignorehitpause = 
;persistent = 

[State 0, ChangeState]
Type = ChangeState
Triggerall = StateType = S
Trigger1 = time = 0
value = 13103
;anim =
;ignorehitpause = 
;persistent = 

[State 0, ChangeState]
Type = ChangeState
Triggerall = StateType = A
Trigger1 = time = 0
value = 95632
;anim =
;ignorehitpause = 
;persistent = 


;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 13106]
Type    = C
moveType= H
physics = C

[State 5011, 1]
Type = HitVelSet
Trigger1 = Time = 0
x = 1

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Ishelper
;ignorehitpause = 
;persistent = 

[State 5011, 2]
Type = ChangeAnim
Trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animType)

[State 5011, 3] ;Stop sliding back
Type = VelMul
Trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
Type = VelSet
Trigger1 = HitOver
x = 0

[State 5011, 5]
Type = DefenceMulSet
Trigger1 = HitOver
value = 1

[State 5011, 6]
Type = selfState
Trigger1 = HitOver
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 95632]
Type    = A
moveType= H
physics = N
velset = 0,0

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Ishelper
;ignorehitpause = 
;persistent = 

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = GetHitVar(animType) != [3,5]
value = Cond((GetHitVar(airType) = 1),5000,5010) + GetHitVar(animType)

[State 5020, 2] ;Anim for HIT_BACK
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = GetHitVar(animType) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = (GetHitVar(animType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animType)))
value = 5047 + GetHitVar(animType) ;5051 - 4 + Type

[State 5020, 4] ;Freeze anim
Type = ChangeAnim
Trigger1 = Time > 0
value = anim

[State 5020, 5]
Type = ChangeState
Trigger1 = HitShakeOver
value = 95633

[State 5020, FFB Light]
Type = ForceFeedback
Trigger1 = anim = 5000
Trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
Type = ForceFeedback
Trigger1 = anim = 5001
Trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
Type = ForceFeedback
Trigger1 = anim = 5012
Trigger2 = anim = 5002
Trigger3 = anim = 5030
Trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 95633]
Type    = A
moveType= H
physics = N
ctrl = 0

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Ishelper
;ignorehitpause = 
;persistent = 

[State 5030, 1]
Type = VelAdd;Gravity
Trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
Type = HitVelSet
Trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
Type = ChangeState
Triggerall = !HitFall
Trigger1 = HitOver
Trigger2 = Vel Y > 0    ;Hit ground
Trigger2 = Pos Y >= 10  ;.
value = 95640 ;HITA_RECOV

[State 5030, 4]
Type = ChangeState
Triggerall = HitFall
Trigger1 = HitOver
Trigger2 = Vel Y > 0    ;Hit ground
Trigger2 = Pos Y >= 10  ;.
value = 95650 ;HITA_FALL

[State 5030, 5]
Type = ChangeState
Trigger1 = AnimTime = 0
value = 95635 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 95635]
Type    = A
moveType= H
physics = N

[State 5035, 1]
Type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = SelfAnimExist(5035)
Trigger1 = Anim != [5051,5059] ;Not if in hit up anim
Trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Ishelper
;ignorehitpause = 
;persistent = 

[State 5035, 2]
Type = VelAdd
Trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
Type = ChangeState
Triggerall = !HitFall
Trigger1 = HitOver  ;Hit is over
Trigger2 = AnimTime = 0 ;Animation over
Trigger3 = Vel Y > 0    ;Hit ground
Trigger3 = Pos Y >= 10  ;.
Trigger4 = Time = 0     ;No transition anim
Trigger4 = Anim != 5035 ;.
value = 95640 ;HITA_RECOV

[State 5035, 4]
Type = ChangeState
Triggerall = HitFall
Trigger1 = HitOver  ;Hit is over
Trigger2 = AnimTime = 0 ;Anim is over
Trigger3 = Vel Y > 0    ;Hit ground
Trigger3 = Pos Y >= 10  ;.
Trigger4 = Time = 0     ;No transition anim
Trigger4 = Anim != 5035 ;.
value = 95650 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 95640]
Type    = A
moveType= H
physics = N

[State 5040, 1]
Type = ChangeState
Trigger1 = !Alive
value = 95650

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Ishelper
;ignorehitpause = 
;persistent = 

[State 5040, 2]
Type = ChangeAnim
Trigger1 = AnimTime = 0
Trigger1 = Anim != 5040
Trigger2 = Time = 0
Trigger2 = Anim != 5035
value = 95640

[State 5040, 3]
Type = CtrlSet
Trigger1 = HitOver
value = 1

[State 5040, 4]
Type = StateTypeSet
Trigger1 = HitOver
moveType = I

[State 5040, 5]
Type = VelAdd
Trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
Type = selfState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 95650]
Type    = A
moveType= H
physics = N

[State 5050, 1] ;Change anim when done with transition
Type = ChangeAnim
Trigger1 = AnimTime = 0
Trigger1 = Anim = 5035
Trigger2 = Time = 0     ;If no transition anim
Trigger2 = Anim != 5035
Trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
Trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Ishelper
;ignorehitpause = 
;persistent = 

[State 5050, 2] ;Coming down anim
Type = ChangeAnim
Trigger1 = anim = [5050,5059]
Trigger1 = Vel Y >= Cond(anim = 5050, 1, -2)
Trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
Type = VelAdd
Trigger1 = 1
y = GetHitVar(yaccel)


[State 5050, 6]
Type = selfState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= Cond((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;-------------------------------------------------------------------------------

[Statedef 5400]
Type = A
moveType= H
physics = N
velset = 0,0
ctrl = 0

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = ishelper
;ignorehitpause = 
;persistent = 

[State 1000, HitFallSet]
Type = HitFallSet
Trigger1 = !Time
value = 0
ignorehitpause = 1

[State 5400, 0]
Type = ChangeAnim
Trigger1 = !Time
value = 5051

[State 5400, 1]
Type = ChangeAnim
Trigger1 = !AnimTime
value = 5051
elem = 2

[State 5400, 2]
Type = ChangeState
Trigger1 = HitShakeOver
value = 5401

;-----------------------------
[Statedef 5401]
Type = A
moveType= H
physics = N
velset = 0,0
ctrl = 0

[State 1000, VelSet]
Type = VelSet
Triggerall = Hitshakeover
Trigger1 = Anim != [5400,5410]
x = (GetHitVar(xvel)*Facing)
y = GetHitVar(yvel)-0.1


[State 5050, 3]
Type = VelAdd
Triggerall = Hitshakeover
Trigger1 = 1
y = GetHitVar(yaccel)

[State 1000, VelMul]
Type = VelMul
Trigger1 = 1
x = 8.0

[State 5401, 0]
Type = ScreenBound
Trigger1 = 1
value = 1
movecamera = 1,0


[State 5401, 2]
Type = PlayerPush
Trigger1 = 1
value = 0

[State 5401,3]
Type = AfterImage
Trigger1 = time = 5
time = 20
TimeGap = 1
FrameGap = 4
length = 10
trans = add1
PalBright = 0, 0, 0
PalContrast = 128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1

[State 5401, 4]
Type = ChangeAnim
Trigger1 = SelfAnimExist(5010) && !Time
value = 5010


[State 5401, 6]
Type = turn
Triggerall = facing = enemy,facing
Trigger1 = !Time

[State 5401,10]
Type = HitVelSet
Trigger1 = !Time
x = 1

[State 5401,11]
Type = PlaySnd
Trigger1 = time > 0
Trigger1 = backedgedist <= 20 ||Frontedgedist <= 20
value = F7,1

[State 5401,12]
Type = EnvShake
Trigger1 = time > 0
Trigger1 = backedgedist <= 20||Frontedgedist <= 20
time = 20;10
ampl = 8
freq = 120
phase = 0

[State 5401,13]
Type = ChangeState
Trigger1 = time > 0
Trigger1 = backedgedist <= 20||Frontedgedist <= 20
value = 1264;5402

[State 5401,14]
Type = SelfState
Trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100



;---------------------------------------------------------------------------
;HITG_SHAKE
[Statedef 7000]
type=S
movetype=H
physics=N
velset=0,0
[State ScreenBound]
type=ScreenBound
trigger1=1
value=1
movecamera=1,0
[State DestroySelf]
type=DestroySelf
trigger1=1
ignorehitpause=1
[State PosSet]
type=PosSet
trigger1=1
y=0
ignorehitpause=1
[State 5001];AnimforHIT_LIGHTtoHIT_HARD
type=changeanim
trigger1=Time=0
trigger1=GetHitVar(animtype)!=[3,5]
value=Cond((GetHitVar(groundtype)=1),5000,5010)+GetHitVar(animtype)
[State 5002];AnimforHIT_BACK
type=changeanim
trigger1=Time=0
trigger1=GetHitVar(animtype)=[3,5]
value=5030
[State 5003];AnimforHIT_UP/HIT_DIAGUP(onlyifitexists)
type=changeanim
trigger1=Time=0
trigger1=(GetHitVar(animtype)=[4,5])&&(SelfAnimExist(5047+GetHitVar(animtype)))
value=5047+GetHitVar(animtype);5051-4+type
[State 5004];Freezeanim
type=changeanim
trigger1=Time>0
value=anim
[State 5006]
type=ChangeState
trigger1=HitShakeOver
value=7001;HITG_SLIDE
[State 500FFBLight]
type=ForceFeedback
trigger1=anim=5000
trigger2=anim=5010
persistent=0
time=6
waveform=square
[State 500FFBMedium]
type=ForceFeedback
trigger1=anim=5001
trigger2=anim=5011
persistent=0
time=8
waveform=sinesquare
ampl=110,-1,-.3
[State 500FFBHard]
type=ForceFeedback
trigger1=anim=5012
trigger2=anim=5002
trigger3=anim=5030
persistent=0
time=15
waveform=sinesquare
ampl=140
;---------------------------------------------------------------------------
;HITG_SLIDE
[Statedef 7001]
type=S
movetype=H
physics=S
[State ScreenBound]
type=ScreenBound
trigger1=1
value=1
movecamera=1,0
[State DestroySelf]
type=DestroySelf
trigger1=1
ignorehitpause=1
[State 5001,1]
type=HitVelSet
trigger1=Time=0
x=1
[State 5001,2]
type=changeanim
trigger1=AnimTime=0
value=5005+GetHitVar(animtype)+(GetHitVar(groundtype)=2)*10
[State 5001,3];Stopslidingback
type=VelMul
trigger1=Time>=GetHitVar(slidetime)
x=.6
[State 5001,4]
type=VelSet
trigger1=HitOver
x=0
[State 5001,5]
type=DefenceMulSet
trigger1=HitOver
value=1
[State 5001,6]
type=SelfState
trigger1=time>5
trigger1=HitOver
value=0
ctrl=1
;---------------------------------------------------------------------------
;Crouchget-hit(shaking)
[Statedef 7010]
type=C
movetype=H
physics=N
velset=0,0
[State ScreenBound]
type=ScreenBound
trigger1=1
value=1
movecamera=1,0
[State 5011];AnimforHIT_LIGHTtoHIT_HARD
type=changeanim
trigger1=Time=0
trigger1=GetHitVar(animtype)!=[3,5]
value=5020+GetHitVar(animtype)
[State 5012];AnimforHIT_BACK
type=changeanim
trigger1=Time=0
trigger1=GetHitVar(animtype)=[3,5]
value=5030
[State 5013];AnimforHIT_UP/HIT_DIAGUP(onlyifitexists)
type=changeanim
trigger1=Time=0
trigger1=(GetHitVar(animtype)=[4,5])&&(SelfAnimExist(5047+GetHitVar(animtype)))
value=5047+GetHitVar(animtype);5051-4+type
[State 5014];Freezeanim
type=changeanim
trigger1=Time>0
value=anim
[State 5016]
type=ChangeState
trigger1=HitShakeOver
value=7011;Crouchget-hit(knockedback)
[State 501FFBLight]
type=ForceFeedback
trigger1=anim=5020
persistent=0
time=6
waveform=square
[State 501FFBMedium]
type=ForceFeedback
trigger1=anim=5021
persistent=0
time=8
waveform=sinesquare
ampl=110,-1,-.3
[State 501FFBHard]
type=ForceFeedback
trigger1=anim=5022
persistent=0
time=15
waveform=sinesquare
ampl=140
;---------------------------------------------------------------------------
;Crouchget-hit(knockedback)
[Statedef 7011]
type=C
movetype=H
physics=C
[State ScreenBound]
type=ScreenBound
trigger1=1
value=1
movecamera=1,0
[State 5011,1]
type=HitVelSet
trigger1=Time=0
x=1
[State 5011,2]
type=changeanim
trigger1=AnimTime=0
value=5025+GetHitVar(animtype)
[State 5011,3];Stopslidingback
type=VelMul
trigger1=Time>=GetHitVar(slidetime)
x=.6
[State 5011,4]
type=VelSet
trigger1=HitOver
x=0
[State 5011,5]
type=DefenceMulSet
trigger1=HitOver
value=1
[State 5011,6]
type=selfstate
trigger1=HitOver
value=11
ctrl=1
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; ここから下に新しいステートを書くと分かりやすくていいと思います
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; ここは-2のステートを書いてください、ヘルパー関係です
;---------------------------------------------------------------------------
[Statedef -2]


[State 0, SelfState]
Type = SelfState
TriggerAll = Ishelper(4007)
TriggerAll = Root,Var(59)>5
TriggerAll = Root,Stateno = 1500
Trigger1 = Stateno!=4007
value = 4007
;anim =
;ctrl =
;ignorehitpause = 0


[State 0, VarSet]
type = VarSet
TriggerAll = Movehit
trigger1 = stateno = [200,1999]
fv = 28
value = .5
ignorehitpause = 1
;persistent = 

[State 0, VarSet]
type = VarSet
TriggerAll = Movehit
trigger1 = stateno = [2000,2199]
trigger2 = stateno = [2400,2427]
fv = 28
value = 1.5
ignorehitpause = 1
;persistent = 

[State 0, VarSet]
type = VarSet
TriggerAll = Movehit
trigger1 = stateno = [2200,2399]
trigger2 = stateno = 2604
trigger3 = stateno = 3002
fv = 28
value = 2
ignorehitpause = 1
;persistent = 




[State 0, VarSet]
type = VarSet
Trigger1 = Ctrl
Trigger2 = Stateno<200
Trigger3 = Movetype = H ||statetype = L
Trigger4 = RoundState!=2
fv = 28
value = 0
ignorehitpause = 1
;persistent = 

[State 0, DestroySelf]
Type = DestroySelf
TriggerAll = Ishelper(4007)
Trigger1 = Root,Stateno != 1500
;ignorehitpause = 
;persistent = 

[State 0, RemoveExplod]
type = RemoveExplod
Trigger1 = Stateno = 2702
Trigger1 = Enemynear,stateno = 2429
Trigger2 = Stateno!=[2700,2704]
id = 5267
;ignorehitpause = 
;persistent = 

[State 0, RemoveExplod]
type = RemoveExplod
Trigger1 = Stateno = 2702
Trigger1 = Enemynear,stateno = 2429
Trigger2 = Stateno!=[2700,2704]
id = 5268
;ignorehitpause = 
;persistent = 



;----------------------------------------------------------------------------
;防止被打出或相?等因素?致坐??位从而不能正常??
;未完成な相手キャラによって、不具合が起きても自己解決するシステム(仮)
[State -2, Y座標自己修復]
Type = PosSet
Triggerall = RoundState = 2
Trigger1 = Stateno = [0,12]      ;立ち＆屈み時
Trigger1 = floor(Pos Y) = [-2,3] ;立ち位置が僅かにずれていたらすぐ修正
y = 0
[State -2, Y座標自動修正]
Type = PosAdd
Triggerall = RoundState = 2
Triggerall = Life < Var(22)  ;トレーニングでCtrl+Iを使うときに配慮
Trigger1 = Stateno = [0,30]  ;歩きも含める
Trigger1 = floor(Pos Y) < -2 ;立ち位置が大きくずれていたら移動する
y = 2
[State -2, Y座標自動修正]
Type = PosAdd
Triggerall = RoundState = 2
Triggerall = Life < Var(22)
Trigger1 = Stateno = [0,30]
Trigger1 = floor(Pos Y) > 2 ;同じく
y = -2
[State -2, Y座標強制修復]               ;GATTより一言…
Type = ChangeState                      ;この辺のシステムは
Triggerall = RoundState = 2             ;うちの咲夜に搭載しているもので
Triggerall = ctrl = 1                   ;かなりオリジナルな設定です。
Triggerall = alive = 1                  ;いらない、または重い処理を使う際は削除してください
Triggerall = !Lose
Trigger1 = Pos Y < -1800 ;空高く飛ばされてしまっても体勢を立て直して落下する
Trigger1 = GameTime % 10 = 0
Trigger2 = Pos Y > 480   ;地中深くに埋められてしまっても這い上がってくる
Trigger2 = GameTime % 10 = 0
value = 40
;----------------------------------------------------------------------------------------------------------------------------------
[State 0, MAX??无?juggle]
Type = AssertSpecial
TriggerAll = Var(41)>0
Trigger1 = 1
flag = nojugglecheck
ignorehitpause = 1

[State 0, NotHitBy]
Type = NotHitBy
Trigger1 = StateNo = [2101,2107]
Trigger1 = Var(59)>=5
Trigger2 = StateNo = [2300,2303]
Trigger3 = StateNo = [2200,2204]
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
;persistent = 


;MAX条?数
[State -2 ,?气];MAX発動時のパワーセット
Type = VarSet
Trigger1 = var(41) = 1000
v = 33
value = power

;Var(41)就代表MAX条气槽?

[State -2,MAX条气槽量大于0就减1 ]
Type = varadd
Trigger1 = var(41) > 0
v = 41
value = -1

[State -2, MAX气槽量小于0并且死了重置为0]
Type = VarSet
Trigger1 = var(41) < 0
Trigger2 = RoundState = [0,1]
Trigger3 = !alive
v = 41
value = 0

[State -2, MAX条存在相当于一气气条]
Type = powerset
Triggerall = var(41) > 0
Trigger1 = Stateno != [3000,4999]
Trigger1 = Stateno != [11000,12999]
value = var(33)
ignorehitpause = 1



;点滅
;BC存在??
[State a];?柵
Type = palfx
Triggerall = Var(41) > 0
Trigger1 = gametime % 14 = 0
time = 1
add = 96,96,0
color = 186
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Var(41) > 0
Trigger1 = gametime % 14 = 1
Trigger2 = gametime % 14 = 13
time = 1
add = 84,84,0
color = 196
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Var(41) > 0
Trigger1 = gametime % 14 = 2
Trigger2 = gametime % 14 = 12
time = 1
add = 72,72,0
color = 206
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Var(41) > 0
Trigger1 = gametime % 14 = 3
Trigger2 = gametime % 14 = 11
time = 1
add = 60,60,0
color = 216
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Var(41) > 0
Trigger1 = gametime % 14 = 4
Trigger2 = gametime % 14 = 10
time = 1
add = 48,48,0
color = 226
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Var(41) > 0
Trigger1 = gametime % 14 = 5
Trigger2 = gametime % 14 = 9
time = 1
add = 36,36,0
color = 236
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Var(41) > 0
Trigger1 = gametime % 14 = 6
Trigger2 = gametime % 14 = 8
time = 1
add = 24,24,0
color = 246
ignorehitpause = 1

[State a];?柵
Type = palfx
Triggerall = Var(41) > 0
Trigger1 = gametime % 14 = 7
time = 1
add = 12,12,0
color = 256
ignorehitpause = 1

;BC存在?残影
[State -2, ]
Type = AfterImage
Triggerall = var(41) > 0
Triggerall = life > lifemax/3
Trigger1 = GameTime%20 = 0
time = 4
length = 11
timegap = 1
frameGap = 3
PalBright = 128,3,3
PalContrast = 126,126,0
PalAdd = 126,126,0
PalMul = .6 , .6 , .6
ignorehitpause = 1

[State -2, PalFX]
Type = null;PalFX
Triggerall = var(41) > 0 
Triggerall = life < lifemax/3
Trigger1 = GameTime%2 = 0
time = 1
add = 60,60,60
color = 1
ignorehitpause = 1

[State -2, ]
Type = AfterImage
Triggerall = var(41) > 0
Triggerall = life < lifemax/3
Trigger1 = GameTime%20 = 0
time = 4
length = 11
timegap = 1
frameGap = 3
PalBright = 128,3,3
PalContrast = 190,63,35
PalAdd = 60,60,60
PalMul = .6 , .6 , .6
ignorehitpause = 1

[State -2]
Type = Afterimagetime
Triggerall = var(41) > 0
Trigger1 = GameTime%7 = 0
time = 2
ignorehitpause = 1

[State -2, 被打被防御回气]
Type = PowerAdd
Trigger1 = Time = 0 && StateNo = [150,154]
Trigger2 = MoveType = H && Time = 0
value = 35 + Random%2
ignorehitpause = 1
persistent = 0

;------------------------------------------------------------------------------------------------------
[State -2, MAX??]
Type = Helper
TriggerAll = RoundState = 2
Trigger1 = !numhelper(16000)
Trigger1 = Var(41)>0 
id = 16000
name = "MAX"
sprpriority = 1
pos = 0,0
posType = p1
Stateno = 16000
helperType = normal
pausemovetime = 99999999
supermovetime = 99999999
keyctrl = 0 
ownpal = 1

[State 0, RemoveExplod]
Type = RemoveExplod
Trigger1 = numexplod(30310)
Trigger2 = Stateno!=[3000,3008]
id = 30140
;ignorehitpause = 
;persistent = 

[State 0, RemoveExplod]
Type = RemoveExplod
Trigger1 = numexplod(30310)
Trigger2 = Stateno!=[3000,3008]
id = 30150
;ignorehitpause = 
;persistent = 

[State 0, RemoveExplod]
Type = RemoveExplod
Trigger1 = numexplod(30310)
Trigger2 = Stateno!=[3000,3008]
id = 30160
;ignorehitpause = 
;persistent = 

[State 0, RemoveExplod]
Type = RemoveExplod
Trigger1 = numexplod(30310)
Trigger2 = Stateno!=[3000,3008]
id = 30170
;ignorehitpause = 
;persistent = 

[State 0, RemoveExplod]
Type = RemoveExplod
Trigger1 = numexplod(30310)
Trigger2 = Stateno!=[3000,3008]
id = 30180
;ignorehitpause = 
;persistent = 

[State 0, RemoveExplod]
Type = RemoveExplod
Trigger1 = numexplod(30310)
Trigger2 = Stateno!=[3000,3008]
id = 30200
;ignorehitpause = 
;persistent = 

[State 0, RemoveExplod]
Type = RemoveExplod
Trigger1 = numexplod(30310)
Trigger2 = Stateno!=[3000,3008]
id = 30210
;ignorehitpause = 
;persistent = 

[State 0, RemoveExplod]
Type = RemoveExplod
Trigger1 = numexplod(30310)
Trigger2 = Stateno!=[3000,3008]
id = 30220
;ignorehitpause = 
;persistent = 

[State 0, RemoveExplod]
Type = RemoveExplod
Trigger1 = numexplod(30310)
Trigger2 = Stateno!=[3000,3008]
id = 30230
;ignorehitpause = 
;persistent = 



[State 0, RemoveExplod]
Type = RemoveExplod
Trigger1 = numexplod(30310)
Trigger2 = Stateno!=[3000,3008]
id = 30240
;ignorehitpause = 
;persistent = 


[State 0, RemoveExplod]
Type = RemoveExplod
Trigger1 = numexplod(30310)
Trigger2 = Stateno!=[3000,3008]
id = 30280
;ignorehitpause = 
;persistent = 

















;-------------------------------------------------------
;下面不要?
[State -2, 1];ダッシュの音止め
Type = stopSnd
Trigger1 = Stateno != 100
channel = 1


[State -2, 3]
Type = stopSnd
Trigger1 = MoveType = H
channel = 2

[State 0, ScreenBound]
Type = ScreenBound
Trigger1 = Stateno = [2200,2204]
value = 1
movecamera = 0,0
;ignorehitpause = 
;persistent = 

;---------------------- Integer variable list ----------------------


[State -2, DisplayToClipboard]
Type = DisplayToClipboard
Trigger1 = 1
text = "var(43)=%d,var(20)=%d ,F28=%f"
params = var(43),var(20),Fvar(28)
ignorehitpause = 1
;persistent = 



[State -2, AppendToClipboard]
Type = AppendToClipboard
Trigger1 = 1
text = "3= %d ,8= %d"
params =helper(88000),var(3),helper(88000),var(8)
ignorehitpause = 1
;persistent = 


[State -2, 4];ハイジャンプ判定
Type = varadd
Trigger1 = 1
v = 15
value = -1

[State -2, 当身??]
Type = VarSet
Triggerall = var(11) = 0
Trigger1 = PrevStateno = [200,5000)
Trigger1 = MoveType!=A
Trigger1 = movereversed 
v = 11    ;fv = 10
value = enemynear,prevStateno
ignorehitpause = 1
;persistent = 

[State -2, 当身??]
Type = VarSet
Triggerall = var(11)!=0
Triggerall = p2Stateno!=var(11)
Trigger1 = PrevStateno = [200,5000)
Trigger1 = MoveType!=A
Trigger1 = movereversed 
v = 12    ;fv = 10
value = enemynear,prevStateno
ignorehitpause = 1
;persistent = 


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;::::::::変数設定(多分ダメージ関係が殆ど)
[State a]
Type = varset
Trigger1 = moveType = H
v = 13
value = 0

;::::::::ボイス変更の乱数
[State 180, 1]
Type = VarRandom
Trigger1 = 1
v = 6
range = 0,2


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;ダメージ時のエフェクト、サウンドの消去
;//////////////////////////////////////////////////////////////////////////
;ダッシュ終了時のエフェクトの消去
[State 1];ブレスレットのエフェクト消去、主に通常動作
Type = removeexplod
Trigger1 = MoveType = H && Stateno != [120,159]
ID = 3000


[State 1]
Type = removeexplod
Trigger1 = Stateno != 101
ID = 102

[State a]
Type = removeexplod
Trigger1 = MoveType = H
id = 1655

[State a]
Type = removeexplod
Trigger1 = MoveType = H
id = 1860

;ダメージ時のサウンドの消去
[State a]
Type = stopsnd
Trigger1 = MoveType = H
channel = 1

;ダメージ時の残像の消去
[State a];
Type = afterimagetime
Trigger1 = MoveType = H
time = 0


;///////////////////////////////////////////////////////////////////////
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;



[State ]
Type=varset
Trigger1=!numtarget
Trigger2=enemynear(floor(fvar(37))),moveType!=h
var(26)=0

;------ヒット数加算
[State ]
Type=varadd
Triggerall=numtarget
Triggerall=enemynear(floor(fvar(37))),moveType=h
Triggerall=enemynear(floor(fvar(37))),gethitvar(hitcount)>var(26)
Trigger1=movehit
Trigger2=projhittime(0)=0
;ヘルパー用
Trigger3=numhelper(252)
Trigger3=helper(252),movehit=1+(moveType!=a)
var(26)=1




;-----補正
[State ]
Type=attackmulset
Trigger1=1
value=1.00-0.048*var(26)
[State ]
Type=attackmulset
Trigger1=var(26)>=9
value=0.3

